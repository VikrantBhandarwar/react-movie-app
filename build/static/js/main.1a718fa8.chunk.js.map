{"version":3,"sources":["assets/images/abstract_movie_poster.svg","utils/common.js","store/middlewares/utils.js","store/middlewares/moviedb-api.js","store/domains/common/common.types.js","store/domains/ui/ui.types.js","components/Notifier.js","store/domains/ui/ui.actions.js","components/utils/score-color.js","components/MovieCard.js","components/types/movie-type.js","components/placeholders/MovieCardPlaceholder.js","components/MovieList.js","components/MovieBrowser.js","store/domains/home/home.types.js","store/domains/user/user.types.js","store/domains/user/user.actions.js","store/utils.js","components/Home.js","store/domains/home/home.actions.js","components/SearchInput.js","components/SearchOutput.js","store/domains/search/search.types.js","store/domains/search/search.actions.js","components/Navbar.js","components/utils/debounce.js","store/domains/movie/movie.types.js","components/placeholders/MoviePagePlaceholder.js","components/utils/formatter.js","components/placeholders/EmptyBlock.js","components/Movie.js","store/domains/movie/movie.actions.js","assets/images/404.svg","components/Page404.js","store/domains/entities/entities.types.js","store/domains/entities/entities.actions.js","components/MovieCardFetch.js","components/Favorites.js","components/Visited.js","components/Sidebar.js","components/App.js","store/domains/common/common.actions.js","store/domains/common/common.reducer.js","store/domains/ui/ui.utils.js","store/domains/ui/ui.reducer.js","store/domains/user/user.reducer.js","store/domains/shared.js","store/domains/movie/movie.reducer.js","store/domains/home/home.reducer.js","store/domains/entities/entities.reducer.js","store/domains/search/search.reducer.js","store/store.js","index.js"],"names":["module","exports","generateId","globalId","dispatchAction","action","payload","next","Array","isArray","forEach","item","type","console","error","ActionTask","id","isCancelled","isDone","_handlers","cancel","done","Object","isFrozen","this","h","freeze","subscribe","event","handler","push","unsubscribe","filter","events","DONE","CANCEL","API_KEY","MOVIEDB_MIDDLEWARE","MiddlewareName","get","url","params","cancelToken","axios","baseURL","method","token","assign","api_key","language","timeout","GENRES_FETCH_REQUEST","GENRES_FETCH_SUCCESS","GENRES_FETCH_FAIL","ADD_ERROR","REMOVE_ERROR","displayed","withSnackbar","connect","state","errors","ui","dispatch","removeError","enqueueSnackbar","closeSnackbar","useEffect","includes","message","key","variant","Button","onClick","onExited","reason","splice","indexOf","VoteColors","UNKNOWN","BAD","OK","GOOD","EXCELLENT","getScoreColor","score","color","useStyles","makeStyles","theme","root","position","boxShadow","textDecoration","transform","opacity","display","posterContainer","overflow","posterImage","width","minHeight","borderRadius","backgroundColor","transition","posterOverlay","content","height","left","top","background","details","padding","movieName","fontWeight","margin","lineHeight","justifyContent","minWidth","breakpoints","down","fontSize","extraInfo","favoriteBtn","right","paddingLeft","spacing","paddingRight","favoriteBtnActive","MovieCard","title","genres","voteAverage","releaseDate","posterImageUrl","isFavorite","onFavorite","classes","vote","className","to","src","alt","size","e","stopPropagation","preventDefault","classNames","Typography","component","style","Date","getFullYear","length","slice","join","PropTypes","shape","oneOfType","string","number","isRequired","overview","arrayOf","instanceOf","backdropImageUrl","duration","budget","backdropImage","productionCountries","legend","actors","exact","name","character","gender","photo","crew","department","job","isExtendedDataLoaded","bool","MovieCardPlaceholder","Box","Skeleton","marginTop","cursor","transitionDelay","zIndex","MovieListItem","children","Grid","xs","sm","md","MovieList","container","justify","wrap","loader","alignItems","button","buttonProgress","palette","primary","animationDuration","marginRight","MovieBrowser","movies","isFetching","isFetched","totalMovies","placeholdersAmount","onLoadMore","canLoadMore","Fragment","from","map","movie","index","once","placeholder","fullWidth","disabled","CircularProgress","disableShrink","thickness","Loop","POPULAR_MOVIES_FETCH_REQUEST","POPULAR_MOVIES_FETCH_SUCCESS","POPULAR_MOVIES_FETCH_FAIL","TOP_RATED_MOVIES_FETCH_REQUEST","TOP_RATED_MOVIES_FETCH_SUCCESS","TOP_RATED_MOVIES_FETCH_FAIL","UPCOMING_MOVIES_FETCH_REQUEST","UPCOMING_MOVIES_FETCH_SUCCESS","UPCOMING_MOVIES_FETCH_FAIL","USER_VISITED_MOVIE","USER_FAVORITE_TOGGLE","USER_CLEARED_VISITED_MOVIES","toggleFavorite","prepareImage","getMovie","entities","user","moviesById","genreIds","genresById","favoriteMovieIds","prepareMovie","raw","posterSize","backdropSize","extended","basicData","i","genre_ids","vote_average","release_date","poster_path","backdrop_path","popularity","extendedData","runtime","production_countries","c","tagline","credits","cast","profile_path","person","movieList","CustomTabs","withStyles","border","indicator","Tabs","CustomTab","selected","Tab","categories","POPULAR","TOP_RATED","UPCOMING","MOVIES_PER_PAGE","isAppReady","common","popularMovies","home","topRatedMovies","upcomingMovies","fetchPopularMovies","page","meta","target","handlers","request","success","fail","fetchTopRatedMovies","fetchUpcomingMovies","props","useState","categoryName","setCategoryName","categoryMap","fetch","category","ids","switchTab","newCategory","Container","value","onChange","newValue","aria-label","label","flexWrap","icon","pointerEvents","input","transitions","create","SearchInput","onFocus","onBlur","InputBase","inputProps","maxHeight","overflowY","useItemStyles","itemImage","flexShrink","itemInfo","marginLeft","Item","poster","require","ListItem","Link","SearchOutput","fullHeight","List","aria-labelledby","SEARCH_REQUEST","SEARCH_SUCCESS","SEARCH_FAIL","SEARCH_CANCEL","SEARCH_QUERY_CHANGED","DUMMY_ACTION","searchTask","cancelSearch","menu","brand","overlay","CustomAppBar","AppBar","NavButton","search","location","router","pathname","searchMovies","query","trim","task","changeQuery","useTheme","onMenu","foundMovies","isMobile","useMediaQuery","showMobileSearch","setShowMobileSearch","showOutput","setShowOutput","output","searchDebounce","useCallback","func","wait","immediate","context","args","arguments","later","apply","callNow","clearTimeout","setTimeout","debounce","handleSearchInput","enabled","document","body","Toolbar","IconButton","edge","Menu","noWrap","fill","MOVIE_PAGE_FETCH_REQUEST","MOVIE_PAGE_FETCH_SUCCESS","MOVIE_PAGE_FETCH_FAIL","SIMILAR_MOVIES_FETCH_REQUEST","SIMILAR_MOVIES_FETCH_SUCCESS","SIMILAR_MOVIES_FETCH_FAIL","RECOMMENDED_MOVIES_FETCH_REQUEST","RECOMMENDED_MOVIES_FETCH_SUCCESS","RECOMMENDED_MOVIES_FETCH_FAIL","skeleton","MoviePagePlaceholder","subtitle","text","rows","_","Math","random","Rating","iconEmpty","readOnly","Formatter","formatDate","date","getDay","getMonth","numberWithCommas","x","toString","replace","EmptyBlock","movieContainer","paddingTop","paddingBottom","backdrop","backgroundImage","objectFit","genreList","listStyle","genre","marginBottom","crewList","MovieInfo","loaded","MovieRecommendations","fetchSimilarMovies","fetchRecommendedMovies","recommended","recommendedMovies","similar","similarMovies","fetchSimilarMoviesCb","fetchRecommendedMoviesCb","amount","fetchMovie","append_to_response","fetchMoviePage","movieId","makeMovieVisited","urlId","useParams","window","scrollTo","_extends","source","prototype","hasOwnProperty","call","_objectWithoutProperties","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","_ref3","_ref4","d","points","y","_ref","svgRef","viewBox","ref","undefined","ForwardRef","forwardRef","flexDirection","Page404","MOVIE_FETCH_REQUEST","MOVIE_FETCH_SUCCESS","MOVIE_FETCH_FAIL","MovieCardFetch","ready","movieIds","minheight","visitedMovieIds","cleanVisitedMovies","list","Sidebar","open","onClose","Drawer","anchor","Divider","ListItemIcon","ListItemText","isLoading","isGenresLoaded","fetchGenres","showSidebar","setShowSidebar","autoHideDuration","CssBaseline","LinearProgress","path","Home","Movie","Favorites","Visited","initialState","universalMessage","prepareError","isAxiosError","response","status","JSON","parse","localStorage","getItem","moviesFetchInitialState","moviesFetchReducer","prefix","total_results","results","initialSearchState","history","createBrowserHistory","rootReducer","combineReducers","err","setItem","stringify","Set","LOCATION_CHANGE","m","filterEmptyMovies","sort","a","b","preparedMovie","fetchDate","connectRouter","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","debug","async","isDummy","log","msg","data","AxiosCancelToken","toLowerCase","MovieDbApiMiddleware","routerMiddleware","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.1a718fa8.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/abstract_movie_poster.bca418f3.svg\";","// A simple function for generation of unique IDs\nexport const generateId = (function () {\n    let globalId = 0\n    return function () {\n        return globalId++\n    }\n})()\n","import {generateId} from \"../../utils/common\"\n\n/**\n * This function allows us to dispatch action(s)\n * defined in different ways through the 'next' function.\n *\n * @param {string|function|array} action\n * @param {*} payload\n * @param {function} next\n * @returns {*}\n */\nexport function dispatchAction(action, payload = null, next) {\n    if (Array.isArray(action)) return action.forEach(item => dispatchAction(item, payload, next))\n\n    if (typeof action === 'string') {\n        return next({type: action, payload})\n    } else if (typeof action === \"function\") {\n        return action(next, payload)\n    } else {\n        console.error('\\'action\\' prop must be a string or function, but got: ' + typeof action)\n    }\n}\n\n/**\n * Allows us to manage action executing in a Middleware.\n *\n * @returns {{cancel(): void, , done(): void, isCancelled: boolean, subscribe(string, function): void, unsubscribe(string, function): void, id: string, _handlers: {cancel: [], done: []}, isDone: boolean}}\n * @constructor\n */\nexport function ActionTask() {\n    return {\n        id: \"TASK-\" + generateId(),\n        isCancelled: false,\n        isDone: false,\n        _handlers: {\n            cancel: [],\n            done: [],\n        },\n        cancel() {\n            if(Object.isFrozen(this)) return\n            this.isCancelled = true\n            this._handlers.cancel.forEach(h => h && h(this))\n        },\n        done() {\n            this.isDone = true\n            this._handlers.done.forEach(h => h && h(this))\n            Object.freeze(this)\n        },\n        subscribe(event, handler) {\n            this._handlers[event].push(handler)\n        },\n        unsubscribe(event, handler) {\n            this._handlers[event] = this._handlers[event].filter(h => h !== handler)\n        }\n    }\n}\n\nActionTask.events = {\n    DONE: 'done',\n    CANCEL: 'cancel'\n}\n","import axios from \"axios\"\nimport {dispatchAction, ActionTask} from \"./utils\"\nimport {CancelToken as AxiosCancelToken} from 'axios'\n\nconst API_KEY = \"e0d3d49d19ce926b6842e10c9d97ba31\"\n\nexport const MOVIEDB_MIDDLEWARE = 'MOVIEDB_MIDDLEWARE'\n\n// ACTION SCHEMA\n// -----------\n// const example = {\n//     type: \"SEARCH_MOVIES\",\n//     payload: {\n//         // for POST method\n//         someData: {},\n//     },\n//     meta: {\n//         target: MOVIEDB_MIDDLEWARE_TARGET,\n//         url: \"popular/movie\",\n//         method: \"GET\",\n//         params: {page: 2},\n//         handlers: {\n//             request: \"SOME_ACTION_REQUEST\",\n//             success: function (dispatch, {results: movies}) {\n//                 dispatch({type: \"SOME_ACTION_SUCCESS\", payload: {movies}})\n//             },\n//             fail: [\n//                 \"ADD_ERROR\",\n//                 \"SOME_ACTION_FAIL\",\n//                 function (dispatch, {error}) {\n//                     console.error('ERROR', error)\n//                 }\n//             ],\n//             cancel: \"SOME_ACTION_CANCEL\"\n//         }\n//     }\n// }\n\nconst MiddlewareName = 'MovieDB Api Middleware'\n\nexport function MovieDbApiMiddleware(debug = false) {\n    return store => next => async action => {\n        const {type, payload, meta} = action\n\n        if (!meta || meta.target !== MOVIEDB_MIDDLEWARE) return next(action)\n        if (!meta.handlers || !Object.keys(meta.handlers).length)\n            return console.error(`action must contain non empty 'meta' object with at least one handler`, action)\n\n        const {url, method, params, handlers} = meta\n        const task = meta.task || {isCancelled: false, isDone: false, isDummy: true}\n        const log = (msg, ...data) => console.log(\n            `%c[${MiddlewareName}]`, 'font-weight: bold',\n            `[${type}]${!task.isDummy ? ` [${task.id}]` : \"\"}: ${msg}`,\n            ...data\n        )\n\n        const cancelToken = AxiosCancelToken.source()\n        !task.isDummy && task.subscribe(ActionTask.events.CANCEL, function () {\n            cancelToken.cancel()\n            if (debug) log(`Action has been canceled`)\n            if (handlers.cancel) dispatchAction(handlers.cancel, null, store.dispatch)\n        })\n\n        if (!task.isCancelled && handlers.request) {\n            if (debug) log(`Request handling`, meta, payload)\n            dispatchAction(handlers.request, null, store.dispatch)\n        }\n\n        try {\n            let response\n            if (method.toLowerCase() === 'get') response = await get(url, params, cancelToken)\n            // else if () { ... }\n            else {\n                console.error('Unknown request method: ' + method, action)\n                return next(action)\n            }\n            if (handlers.success && !task.isCancelled) {\n                if (debug) log(`Success handling`)\n                dispatchAction(handlers.success, response.data, store.dispatch)\n            }\n        } catch (error) {\n            if (!task.isCancelled) {\n                if (debug) log(`Fail handling`, error)\n                if (handlers.fail) {\n                    dispatchAction(handlers.fail, {error}, store.dispatch)\n                } else {\n                    console.error(`Uncaught exception in ${MiddlewareName}: `, error)\n                }\n            }\n        } finally {\n            if (!task.isDummy && !task.isCancelled) task.done()\n            // TODO Should we make the task done if it is cancelled?\n            // if (task) task.done()\n        }\n    }\n\n}\n\n\nfunction get(url, params = {}, cancelToken) {\n    return axios({\n        baseURL: \"https://api.themoviedb.org/3/\",\n        url: url,\n        method: \"get\",\n        cancelToken: cancelToken.token,\n        params: Object.assign({},\n            {\n                api_key: API_KEY,\n                language: \"en-US\"\n            }, params\n        ),\n        timeout: 15 * 1000\n    })\n}\n","export const GENRES_FETCH_REQUEST = 'GENRES_FETCH_REQUEST'\nexport const GENRES_FETCH_SUCCESS = 'GENRES_FETCH_SUCCESS'\nexport const GENRES_FETCH_FAIL = 'GENRES_FETCH_FAIL'\n","export const ADD_ERROR = 'ADD_ERROR'\nexport const REMOVE_ERROR = 'REMOVE_ERROR'\n","import React, {useEffect} from 'react'\nimport {connect} from 'react-redux'\nimport {withSnackbar} from 'notistack'\nimport {removeError} from \"../store/domains/ui/ui.actions\"\nimport {Button} from \"@material-ui/core\"\n\nconst displayed = []\n\nfunction Notifier({enqueueSnackbar, closeSnackbar, removeError, errors = []}) {\n\n    useEffect(function () {\n        errors.forEach(error => {\n            if(displayed.includes(error.id)) return\n            enqueueSnackbar(error.message, {\n                key: error.id,\n                variant: \"error\",\n                action: key => (\n                    <Button onClick={() => closeSnackbar(key)}>OK</Button>\n                ),\n                onExited: (event, reason, key) => {\n                    displayed.splice(displayed.indexOf(error.id), 1)\n                    removeError(error)\n                }\n            })\n            displayed.push(error.id)\n        })\n    }, [errors, closeSnackbar, enqueueSnackbar, removeError])\n\n    return null\n}\n\nfunction mapStateToProps(state) {\n    return {\n        errors: state.ui.errors\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        removeError: id => dispatch(removeError(id))\n    }\n}\n\nexport default withSnackbar(connect(mapStateToProps, mapDispatchToProps)(Notifier));\n","import {ADD_ERROR, REMOVE_ERROR} from \"./ui.types\"\n\nexport function addError(error) {\n    return {type: ADD_ERROR, payload: {error}}\n}\n\nexport function removeError(error) {\n    return {type: REMOVE_ERROR, payload: {error}}\n}\n","export const VoteColors = {\n    UNKNOWN: '#999',\n    BAD: '#d63737',\n    OK: '#a7a7a7',\n    GOOD: '#5fbb67',\n    EXCELLENT: '#3bb33b'\n}\n\nexport function getScoreColor(score) {\n    let color = VoteColors.EXCELLENT\n    if(!score || score === 0) color = VoteColors.UNKNOWN\n    else if(score < 5.5) color = VoteColors.BAD\n    else if(score < 6.5) color = VoteColors.OK\n    else if(score < 7.25) color = VoteColors.GOOD\n\n    return color\n}\n","import {makeStyles} from \"@material-ui/core/styles\"\nimport React from \"react\"\nimport {Typography} from \"@material-ui/core\"\nimport {Link} from \"react-router-dom\"\nimport {getScoreColor} from \"./utils/score-color\"\nimport Button from \"@material-ui/core/Button\"\nimport FavoriteIcon from \"@material-ui/icons/Favorite\"\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder'\nimport classNames from 'classnames'\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: \"relative\",\n        boxShadow: \"none\",\n        textDecoration: 'none',\n        color: 'inherit',\n        \"&:hover\": {\n            \"& $posterImage\":{\n                transform: 'scale(1.075)'\n            },\n            \"& $posterOverlay\": {\n                opacity: 1\n            },\n            \"& $favoriteBtn\": {\n                display: 'flex'\n            }\n        },\n    },\n    posterContainer: {\n        position: 'relative',\n        overflow: 'hidden'\n    },\n    posterImage: {\n        position: 'relative',\n        display: 'block',\n        width: \"100%\",\n        minHeight: 250,\n        borderRadius: \"4px\",\n        backgroundColor: '#e8e8e8',\n        transition: 'all 0.15s ease-in-out'\n    },\n    posterOverlay: {\n        position: 'absolute',\n        content: '\"\"',\n        width: '100%',\n        height: '100%',\n        left: 0,\n        top: 0,\n        opacity: 0,\n        transition: 'all 0.15s ease-in-out',\n        background: 'linear-gradient(180deg, rgba(255,255,255,0) 41%, rgba(0,0,0,0.40) 100%)'\n    },\n    details: {\n        padding: '6px 4px'\n    },\n    movieName: {\n        fontWeight: \"normal\",\n        margin: \"4px 0 8px 0\",\n        lineHeight: '140%'\n    },\n    score: {\n        display: 'inline-flex',\n        position: 'absolute',\n        left: -5,\n        top: 8,\n        justifyContent: 'center',\n        fontWeight: 'bold',\n        padding: '2px 8px',\n        minWidth: 30,\n        color: 'white',\n        background: '#83d620',\n        borderRadius: 2,\n        [theme.breakpoints.down('xs')]: {\n            left: -8,\n            top: 12,\n            fontSize: '1.5rem',\n            minWidth: 40,\n        }\n    },\n    extraInfo: {\n        color: 'grey',\n        lineHeight: '150%'\n    },\n    favoriteBtn: {\n        display: 'none',\n        position: 'absolute',\n        right: 10,\n        top: 10,\n        minWidth: 16,\n        paddingLeft: theme.spacing(1),\n        paddingRight: theme.spacing(1),\n        color: 'white',\n        background: 'rgba(75, 87, 95, 0.9)',\n        \"&:hover\": {\n            background: 'rgba(245, 0, 87, 1)',\n        },\n        [theme.breakpoints.down('xs')]: {\n            display: 'flex',\n            padding: theme.spacing(2.5),\n            \"& svg\": {\n                height: theme.spacing(4),\n                width: theme.spacing(4),\n            }\n        }\n    },\n    favoriteBtnActive: {\n        display: 'flex',\n        color: 'white',\n        background: 'rgba(245, 0, 87, 1)',\n        \"&:hover\": {\n            background: 'rgba(245, 0, 87, 0.85)',\n        }\n    }\n}))\n\n\nfunction MovieCard({id, title, genres, voteAverage, releaseDate, posterImageUrl, isFavorite, onFavorite}) {\n    const classes = useStyles()\n\n    const color = getScoreColor(voteAverage)\n\n    const vote = voteAverage > 0 ? voteAverage : '-'\n\n    function handleFavorite(e){\n        e.stopPropagation()\n        e.preventDefault()\n        onFavorite && onFavorite(id)\n    }\n\n    return (\n        <Link className={classes.root} to={\"/movie/\"+id}>\n            <div className={classes.posterContainer}>\n                <img className={classes.posterImage} src={posterImageUrl} alt={title}/>\n                <div className={classes.posterOverlay} />\n                <Button\n                    variant=\"contained\"\n                    color=\"secondary\"\n                    size=\"medium\"\n                    onClick={handleFavorite}\n                    className={classNames([classes.favoriteBtn, {[classes.favoriteBtnActive]: isFavorite}])}>\n                    {isFavorite ? <FavoriteIcon /> : <FavoriteBorderIcon/>}\n                </Button>\n            </div>\n            <div className={classes.details}>\n                <Typography component=\"h4\" className={classes.movieName}>{title}</Typography>\n                <Typography variant=\"body1\" className={classes.score} style={{backgroundColor: color}}>\n                    {vote}\n                </Typography>\n                <Typography variant=\"body1\" className={classes.extraInfo}>\n                    {new Date(releaseDate).getFullYear()}  {genres.length ? genres.slice(0, 3).join(', '): '-'}\n                </Typography>\n            </div>\n        </Link>\n    )\n}\n\nexport default MovieCard\n","import PropTypes from \"prop-types\"\n\nexport const Movie = PropTypes.shape({\n    id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n    title: PropTypes.string.isRequired,\n    overview: PropTypes.string.isRequired,\n    genres: PropTypes.arrayOf(PropTypes.string).isRequired,\n    releaseDate: PropTypes.instanceOf(Date).isRequired,\n    voteAverage: PropTypes.number.isRequired,\n    posterImageUrl: PropTypes.string,\n    backdropImageUrl: PropTypes.string,\n\n    duration: PropTypes.number,\n    budget: PropTypes.number,\n    backdropImage: PropTypes.string,\n    posterImage: PropTypes.string,\n    productionCountries: PropTypes.arrayOf(PropTypes.string),\n    legend: PropTypes.string,\n    actors: PropTypes.arrayOf(PropTypes.exact({\n        id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n        name: PropTypes.string,\n        character: PropTypes.string,\n        gender: PropTypes.number,\n        photo: PropTypes.string\n    })),\n    crew: PropTypes.arrayOf(PropTypes.exact({\n        id: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n        name: PropTypes.string,\n        department: PropTypes.string,\n        job: PropTypes.string,\n        gender: PropTypes.number,\n        photo: PropTypes.string\n    })),\n\n    isExtendedDataLoaded: PropTypes.bool\n})\n","import {Box} from \"@material-ui/core\"\nimport Skeleton from \"@material-ui/lab/Skeleton\"\nimport React from \"react\"\n\n\nexport default function MovieCardPlaceholder() {\n    return (\n        <Box>\n            <Skeleton variant=\"rect\" width={'100%'} height={270}/>\n            <Skeleton variant=\"rect\" style={{marginTop: 15}} width='100%'/>\n            <Skeleton variant=\"rect\" style={{marginTop: 8}} width='70%'/>\n        </Box>\n    )\n}\n","import React from 'react'\nimport Grid from \"@material-ui/core/Grid\"\nimport {makeStyles} from \"@material-ui/core\"\n\nconst useStyles = makeStyles(theme => ({\n    item: {\n        cursor: 'pointer',\n        padding: theme.spacing(1),\n        transition: 'all 0.1s cubic-bezier(0.43, 0.57, 0, 0.99)',\n        transitionDelay: '0.075s',\n        \"&:hover\": {\n            background: 'white',\n            zIndex: 2,\n        },\n        [theme.breakpoints.down('sm')]: {\n            padding: '15px 25px !important'\n        }\n    },\n}))\n\nexport function MovieList({children}) {\n    return (\n        <Grid container justify=\"flex-start\" wrap={\"wrap\"} spacing={2}>\n            {children}\n        </Grid>\n    )\n}\n\nexport function MovieListItem({children}) {\n    const classes = useStyles()\n\n    return (\n        <Grid className={classes.item} item xs={12} sm={4} md={2}>\n            {children}\n        </Grid>\n    )\n\n}\n\nexport default MovieList\n","import React from \"react\"\nimport LazyLoad from 'react-lazyload'\nimport PropTypes from 'prop-types'\nimport MovieCard from \"./MovieCard\"\nimport {makeStyles} from \"@material-ui/core/styles\"\nimport CircularProgress from \"@material-ui/core/CircularProgress\"\nimport {Movie} from \"./types/movie-type\"\nimport Button from \"@material-ui/core/Button\"\nimport {Loop} from \"@material-ui/icons\"\nimport MovieCardPlaceholder from \"./placeholders/MovieCardPlaceholder\"\nimport MovieList, {MovieListItem} from \"./MovieList\"\n\nconst useStyles = makeStyles(theme => ({\n    loader: {\n        height: 400,\n        width: 300,\n        margin: \"0 auto\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\"\n    },\n    button: {\n        marginTop: 20,\n    },\n    buttonProgress: {\n        color: theme.palette.primary,\n        animationDuration: '550ms',\n        marginRight: 6\n    },\n}))\n\nMovieBrowser.propTypes = {\n    movies: PropTypes.arrayOf(Movie),\n    isFetching: PropTypes.bool,\n    isFetched: PropTypes.bool,\n    totalMovies: PropTypes.number,\n    onLoadMore: PropTypes.func,\n    placeholdersAmount: PropTypes.number,\n}\n\nfunction MovieBrowser({movies = [], isFetching, isFetched, totalMovies, placeholdersAmount = 5, onLoadMore, onFavorite}) {\n    const classes = useStyles()\n\n    const canLoadMore = movies.length < totalMovies && !!onLoadMore\n\n    return (\n        <React.Fragment>\n            <MovieList>\n                {(isFetched ? movies : Array.from(new Array(placeholdersAmount))).map((movie, index) => (\n                    <MovieListItem key={movie ? movie.id : 'index:'+index}>\n                        {movie ?\n                            <LazyLoad height={400} once placeholder={<MovieCardPlaceholder />}>\n                                <MovieCard {...movie} onFavorite={onFavorite} />\n                            </LazyLoad> :\n                            <MovieCardPlaceholder/>}\n                    </MovieListItem>\n                ))}\n            </MovieList>\n            {canLoadMore &&\n            <Button className={classes.button} variant=\"outlined\" fullWidth size={\"large\"} disabled={isFetching} onClick={onLoadMore}>\n                {isFetching ?\n                    <CircularProgress\n                        className={classes.buttonProgress}\n                        variant=\"indeterminate\"\n                        disableShrink\n                        size={16}\n                        thickness={4}/> :\n                    <Loop className={classes.buttonProgress}/>}\n                {isFetching ? 'Loading...' : 'Load more'}\n            </Button>}\n        </React.Fragment>\n    )\n}\n\nexport default MovieBrowser\n","export const POPULAR_MOVIES_FETCH_REQUEST = 'POPULAR_MOVIES_FETCH_REQUEST'\nexport const POPULAR_MOVIES_FETCH_SUCCESS = 'POPULAR_MOVIES_FETCH_SUCCESS'\nexport const POPULAR_MOVIES_FETCH_FAIL = 'POPULAR_MOVIES_FETCH_FAIL'\n\nexport const TOP_RATED_MOVIES_FETCH_REQUEST = 'TOP_RATED_MOVIES_FETCH_REQUEST'\nexport const TOP_RATED_MOVIES_FETCH_SUCCESS = 'TOP_RATED_MOVIES_FETCH_SUCCESS'\nexport const TOP_RATED_MOVIES_FETCH_FAIL = 'TOP_RATED_MOVIES_FETCH_FAIL'\n\nexport const UPCOMING_MOVIES_FETCH_REQUEST = 'UPCOMING_MOVIES_FETCH_REQUEST'\nexport const UPCOMING_MOVIES_FETCH_SUCCESS = 'UPCOMING_MOVIES_FETCH_SUCCESS'\nexport const UPCOMING_MOVIES_FETCH_FAIL = 'UPCOMING_MOVIES_FETCH_FAIL'\n","export const USER_VISITED_MOVIE = 'USER_VISITED_MOVIE'\nexport const USER_FAVORITE_TOGGLE = 'USER_FAVORITE_TOGGLE'\n\nexport const USER_CLEARED_VISITED_MOVIES = 'USER_CLEANED_VISITED_MOVIES'\n","import {\n    USER_FAVORITE_TOGGLE,\n    USER_VISITED_MOVIE,\n    USER_CLEARED_VISITED_MOVIES\n} from \"./user.types\"\n\nexport function makeMovieVisited(id) {\n    return {type: USER_VISITED_MOVIE, payload: {id}}\n}\n\nexport function clearVisitedMovies(){\n    return {type: USER_CLEARED_VISITED_MOVIES}\n}\n\nexport function toggleFavorite(id) {\n    return {type: USER_FAVORITE_TOGGLE, payload: {id}}\n}\n","export function prepareImage(url, size = 'w500') {\n    // size = 'original'\n    if (!url) return null\n    return `https://image.tmdb.org/t/p/${size}${url}`\n}\n\nexport function getMovie(id, entities, user) {\n    const movie = entities.moviesById[id]\n    if(!movie) return null\n    return {\n        ...movie,\n        genres: movie.genreIds.map(id => entities.genresById[id]),\n        isFavorite: user.favoriteMovieIds.indexOf(id) !== -1\n    }\n}\n\nexport function prepareMovie({raw = {}, posterSize = 'w500', backdropSize = 'original', extended = false}) {\n    const basicData = {\n        id: raw.id,\n        title: raw.title,\n        overview: raw.overview,\n        genreIds: raw.genres ? raw.genres.map(i => i.id) : raw.genre_ids,\n        voteAverage: raw.vote_average,\n        releaseDate: new Date(raw.release_date),\n        posterImageUrl: prepareImage(raw.poster_path, posterSize),\n        backdropImageUrl: prepareImage(raw.backdrop_path, backdropSize),\n        popularity: raw.popularity\n    }\n    const extendedData = !extended ? null : {\n        duration: raw.runtime,\n        budget: raw.budget,\n        productionCountries: (raw.production_countries || []).map(c => c.name),\n        legend: raw.tagline,\n        actors: (raw.credits || []).cast.map(cast => ({\n            id: cast.id,\n            name: cast.name,\n            character: cast.character,\n            gender: cast.gender,\n            photo: prepareImage(cast.profile_path)\n        })),\n        crew: (raw.credits || []).crew.map(person => ({\n            id: person.id,\n            department: person.department,\n            job: person.job,\n            gender: person.gender,\n            name: person.name,\n            photo: prepareImage(person.profile_path)\n        })),\n\n        isExtendedDataLoaded: true\n    }\n    return Object.assign(basicData, extendedData)\n}\n","import React, {useEffect, useState} from 'react'\nimport Container from \"@material-ui/core/Container\"\nimport Tabs from \"@material-ui/core/Tabs\"\nimport Tab from \"@material-ui/core/Tab\"\nimport MovieBrowser from \"./MovieBrowser\"\nimport {makeStyles} from \"@material-ui/core/styles\"\nimport {connect} from \"react-redux\"\nimport {fetchPopularMovies, fetchTopRatedMovies, fetchUpcomingMovies} from \"../store/domains/home/home.actions\"\nimport {toggleFavorite} from \"../store/domains/user/user.actions\"\nimport {getMovie} from \"../store/utils\"\nimport withStyles from \"@material-ui/core/styles/withStyles\"\n\nconst useStyles = makeStyles(theme => ({\n    movieList: {\n        margin: '20px 0px'\n    },\n    container: {\n        margin: '12px auto'\n    },\n}))\n\nconst CustomTabs = withStyles({\n    root: {\n        borderRadius: 4,\n        border: '1px solid rgb(242, 242, 242)',\n        overflow: 'hidden',\n        background: 'white',\n    },\n    indicator: {\n        background: 'none'\n    }\n})(Tabs)\n\nconst CustomTab = withStyles({\n    root: {\n        minWidth: 110\n    },\n    selected: {\n        background: '#115293',\n        color: 'white'\n    }\n})(Tab)\n\nconst categories = {\n    POPULAR: 'popular',\n    TOP_RATED: 'top-rated',\n    UPCOMING: 'upcoming'\n}\n\nconst MOVIES_PER_PAGE = 20\n\nfunction Home(props) {\n    const {\n        isAppReady,\n\n        popularMovies,\n        topRatedMovies,\n        upcomingMovies,\n\n        entities,\n        user,\n\n        toggleFavorite,\n        fetchPopularMovies,\n        fetchTopRatedMovies,\n        fetchUpcomingMovies,\n    } = props\n\n    const [categoryName, setCategoryName] = useState(categories.POPULAR)\n    const categoryMap = {\n        [categories.POPULAR]: {\n            movies: popularMovies,\n            fetch: fetchPopularMovies\n        },\n        [categories.TOP_RATED]: {\n            movies: topRatedMovies,\n            fetch: fetchTopRatedMovies\n        },\n        [categories.UPCOMING]: {\n            movies: upcomingMovies,\n            fetch: fetchUpcomingMovies,\n        }\n    }\n    const category = categoryMap[categoryName]\n    const movies = isAppReady ? category.movies.ids.map(id => getMovie(id, entities, user)) : []\n\n    function loadMore() {\n        if(category.movies.totalMovies === category.movies.ids.length) return\n        category.fetch(category.movies.ids.length / MOVIES_PER_PAGE + 1)\n    }\n\n    function switchTab(name){\n        setCategoryName(name)\n        const newCategory = categoryMap[name]\n        if(!newCategory.movies.ids.length) newCategory.fetch()\n    }\n\n    useEffect(function () {\n        switchTab(categories.POPULAR)\n        // TODO Should I memorize the function and constants?\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n\n    const classes = useStyles()\n\n    return (\n        <Container className={classes.container}>\n                <CustomTabs\n                    value={categoryName}\n                    onChange={(e, newValue) => switchTab(newValue)}\n                    aria-label=\"disabled tabs example\"\n                >\n                    <CustomTab label=\"Popular\" value={categories.POPULAR}/>\n                    <CustomTab label=\"Top rated\" value={categories.TOP_RATED}/>\n                    <CustomTab label=\"Upcoming\" value={categories.UPCOMING}/>\n                </CustomTabs>\n                <main className={classes.movieList}>\n                    <MovieBrowser\n                        onLoadMore={loadMore}\n                        placeholdersAmount={10}\n                        movies={movies}\n                        onFavorite={toggleFavorite}\n                        isFetched={category.movies.isFetched}\n                        isFetching={!isAppReady || category.movies.isFetching}\n                        totalMovies={category.movies.totalMovies}\n                    />\n                </main>\n        </Container>\n    )\n}\n\nfunction mapStateToProps(state) {\n    return {\n        isAppReady: state.common.isAppReady,\n\n        popularMovies: state.home.popularMovies,\n        topRatedMovies: state.home.topRatedMovies,\n        upcomingMovies: state.home.upcomingMovies,\n\n        entities: state.entities,\n        user: state.user,\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        fetchPopularMovies: (page) => dispatch(fetchPopularMovies(page)),\n        fetchTopRatedMovies: (page) => dispatch(fetchTopRatedMovies(page)),\n        fetchUpcomingMovies: (page) => dispatch(fetchUpcomingMovies(page)),\n        toggleFavorite: (id) => dispatch(toggleFavorite(id))\n    }\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home)\n","import {MOVIEDB_MIDDLEWARE} from \"../../middlewares/moviedb-api\"\nimport {ADD_ERROR} from \"../ui/ui.types\"\nimport {\n    UPCOMING_MOVIES_FETCH_FAIL,\n    UPCOMING_MOVIES_FETCH_REQUEST,\n    UPCOMING_MOVIES_FETCH_SUCCESS,\n    POPULAR_MOVIES_FETCH_FAIL,\n    POPULAR_MOVIES_FETCH_REQUEST,\n    POPULAR_MOVIES_FETCH_SUCCESS,\n    TOP_RATED_MOVIES_FETCH_FAIL,\n    TOP_RATED_MOVIES_FETCH_REQUEST,\n    TOP_RATED_MOVIES_FETCH_SUCCESS\n} from \"./home.types\"\n\nexport function fetchPopularMovies(page = 1) {\n    return {\n        type: \"FETCH_POPULAR_MOVIES\",\n        payload: null,\n        meta: {\n            target: MOVIEDB_MIDDLEWARE,\n            method: \"GET\",\n            params: {page},\n            url: \"movie/popular\",\n            handlers: {\n                request: POPULAR_MOVIES_FETCH_REQUEST,\n                success: POPULAR_MOVIES_FETCH_SUCCESS,\n                fail: [ADD_ERROR, POPULAR_MOVIES_FETCH_FAIL]\n            }\n        }\n    }\n}\n\nexport function fetchTopRatedMovies(page = 1) {\n    return {\n        type: \"FETCH_TOP_RATED_MOVIES\",\n        payload: null,\n        meta: {\n            target: MOVIEDB_MIDDLEWARE,\n            method: \"GET\",\n            params: {page},\n            url: \"movie/top_rated\",\n            handlers: {\n                request: TOP_RATED_MOVIES_FETCH_REQUEST,\n                success: TOP_RATED_MOVIES_FETCH_SUCCESS,\n                fail: [ADD_ERROR, TOP_RATED_MOVIES_FETCH_FAIL]\n            }\n        }\n    }\n}\n\nexport function fetchUpcomingMovies(page = 1) {\n    return {\n        type: \"FETCH_UPCOMING_MOVIES\",\n        payload: null,\n        meta: {\n            target: MOVIEDB_MIDDLEWARE,\n            method: \"GET\",\n            params: {page},\n            url: \"movie/upcoming\",\n            handlers: {\n                request: UPCOMING_MOVIES_FETCH_REQUEST,\n                success: UPCOMING_MOVIES_FETCH_SUCCESS,\n                fail: [ADD_ERROR, UPCOMING_MOVIES_FETCH_FAIL]\n            }\n        }\n    }\n}\n","import React from 'react'\nimport InputBase from \"@material-ui/core/InputBase\"\nimport SearchIcon from '@material-ui/icons/Search'\nimport {makeStyles} from \"@material-ui/core\"\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: 'relative',\n        display: 'flex',\n        flexWrap: 'nowrap',\n    },\n    icon: {\n        position: 'absolute',\n        left: 0,\n        top: 0,\n        display: 'flex',\n        height: '100%',\n        width: theme.spacing(7),\n        pointerEvents: 'none',\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n    input: {\n        color: 'inherit',\n        paddingLeft: theme.spacing(7),\n        padding: 4,\n        transition: theme.transitions.create('background'),\n        background: 'rgba(0, 0, 0, 0.05)',\n        borderRadius: theme.shape.borderRadius,\n        width: '100%',\n        \"&:focus, &:hover\": {\n            background: 'rgba(0, 0, 0, 0.065)',\n        },\n        '&:focus': {\n            minWidth: 400\n        }\n    }\n}))\n\nfunction SearchInput({value, placeholder, onChange, onFocus, onBlur, style}) {\n    const classes = useStyles()\n\n    return (\n        <div className={classes.root} style={style}>\n            <div className={classes.icon}>\n                <SearchIcon />\n            </div>\n            <InputBase className={classes.input}\n                       value={value}\n                       type=\"search\"\n                       onChange={onChange}\n                       onFocus={onFocus}\n                       onBlur={onBlur}\n                       placeholder={placeholder}\n                       inputProps={{ 'aria-label': 'search' }} />\n        </div>\n    )\n}\n\nexport default SearchInput\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {Movie} from \"./types/movie-type\"\nimport List from \"@material-ui/core/List\"\nimport ListItem from \"@material-ui/core/ListItem\"\nimport {makeStyles, Typography} from \"@material-ui/core\"\nimport {getScoreColor} from \"./utils/score-color\"\nimport {Link} from \"react-router-dom\"\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: 'fixed',\n        maxHeight: 400,\n        width: '100%',\n        overflowY: 'auto',\n        background: 'white',\n        boxShadow: '0px 10px 20px rgba(0, 0, 0, 0.22)',\n        zIndex: 2\n    }\n}))\n\nSearchOutput.propTypes = {\n    movies: PropTypes.arrayOf(Movie)\n}\n\nfunction SearchOutput({movies = [], fullHeight = false}) {\n    const classes = useStyles()\n\n    return (\n        <React.Fragment>\n            <List className={classes.root} aria-labelledby=\"nested-list-subheader\">\n                {movies.map(movie => <Item key={movie.id} movie={movie} />)}\n            </List>\n        </React.Fragment>\n    )\n}\n\nconst useItemStyles = makeStyles(theme => ({\n    item: {\n        height: 60,\n        padding: theme.spacing(1),\n        paddingLeft: 20,\n\n        [theme.breakpoints.down('sm')]: {\n            height: 90,\n        }\n    },\n    itemImage: {\n        height: '100%',\n        borderRadius: 4,\n        overflow: 'hidden',\n        flexShrink: 0\n    },\n    itemInfo: {\n         marginLeft: theme.spacing(2),\n         marginRight: theme.spacing(2)\n    },\n    vote: {\n        display: 'flex',\n        alignItems: 'center',\n        marginLeft: 'auto',\n        marginRight: theme.spacing(1),\n        padding: theme.spacing(1),\n        height: '100%',\n        fontWeight: 'bold',\n        fontSize: '12pt',\n    }\n}))\n\nfunction Item({movie}){\n    const classes = useItemStyles()\n\n    const poster = movie.posterImageUrl || require('../assets/images/abstract_movie_poster.svg')\n\n    const color = getScoreColor(movie.voteAverage)\n\n    return (\n        <ListItem button component={Link} className={classes.item} to={\"/movie/\" + movie.id}>\n                <img className={classes.itemImage} src={poster} alt={movie.title}/>\n                <div className={classes.itemInfo}>\n                    <Typography variant=\"body1\">\n                        <span style={{fontWeight: 500}}>{movie.title}</span>\n                        <span style={{color: 'grey'}}>{movie.releaseDate > 0 ? ` (${movie.releaseDate.getFullYear()})` : ''}</span>\n                    </Typography>\n                    <Typography variant=\"body2\" component=\"span\" style={{color: 'grey'}}>\n                        {!!movie.genres.length ? movie.genres.join(', ') : ''}\n                    </Typography>\n                </div>\n                <Typography\n                    variant=\"body2\"\n                    className={classes.vote}\n                    style={{color: color}}\n                >\n                    {movie.voteAverage > 0 ? movie.voteAverage : ''}\n                </Typography>\n        </ListItem>\n    )\n}\n\nexport default SearchOutput\n","export const SEARCH_REQUEST = 'SEARCH_REQUEST'\nexport const SEARCH_SUCCESS = 'SEARCH_SUCCESS'\nexport const SEARCH_FAIL = 'SEARCH_FAIL'\nexport const SEARCH_CANCEL = 'SEARCH_CANCEL'\nexport const SEARCH_QUERY_CHANGED = 'SEARCH_QUERY_CHANGED'\n","import {ActionTask} from \"../../middlewares/utils\"\nimport {MOVIEDB_MIDDLEWARE} from \"../../middlewares/moviedb-api\"\nimport {SEARCH_CANCEL, SEARCH_FAIL, SEARCH_QUERY_CHANGED, SEARCH_REQUEST, SEARCH_SUCCESS} from \"./search.types\"\nimport {ADD_ERROR} from \"../ui/ui.types\"\n\nconst DUMMY_ACTION = {type: \"DO_NOTHING\"}\n\nlet searchTask = {isDone: true, isCancelled: false}\n\nexport function searchMovies(query, page = 1) {\n    if (!query || !query.trim().length) {\n        if(!searchTask.isDone && !searchTask.isCancelled) {\n            // Cancel task and return DUMMY_ACTION\n            // because the cancel handler has already declared \n            // what to dispatch after cancel() call\n            searchTask.cancel()\n            return DUMMY_ACTION\n        }\n        return cancelSearch()\n    }\n    if (!searchTask.isDone && !searchTask.isCancelled) cancelSearch()\n\n    searchTask = ActionTask()\n\n    return {\n        type: \"MOVIES_SEARCH\",\n        payload: null,\n        meta: {\n            target: MOVIEDB_MIDDLEWARE,\n            url: 'search/movie',\n            method: \"GET\",\n            params: {query, page},\n            task: searchTask,\n            handlers: {\n                request: SEARCH_REQUEST,\n                success: SEARCH_SUCCESS,\n                fail: [ADD_ERROR, SEARCH_FAIL],\n                cancel: SEARCH_CANCEL\n            },\n        }\n    }\n}\n\nexport function cancelSearch(){\n    if (!searchTask.isDone && !searchTask.isCancelled) {\n        // Return DUMMY_ACTION because\n        // search action will automatically dispatch cancel handler\n        searchTask.cancel()\n        return DUMMY_ACTION\n    }\n    return {type: SEARCH_CANCEL}\n}\n\nexport function changeQuery(value){\n    return {type: SEARCH_QUERY_CHANGED, payload: {query: value}}\n}\n","import React, {useCallback, useEffect, useState} from \"react\"\nimport AppBar from \"@material-ui/core/AppBar\"\nimport Toolbar from \"@material-ui/core/Toolbar\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport {Menu as MenuIcon} from \"@material-ui/icons\"\nimport Typography from \"@material-ui/core/Typography\"\nimport {Link} from \"react-router-dom\"\nimport {makeStyles, withStyles} from \"@material-ui/core/styles\"\nimport SearchInput from \"./SearchInput\"\nimport SearchOutput from \"./SearchOutput\"\nimport {cancelSearch, changeQuery, searchMovies} from \"../store/domains/search/search.actions\"\nimport {connect} from \"react-redux\"\nimport {debounce} from \"./utils/debounce\"\nimport FavoriteIcon from '@material-ui/icons/Favorite'\nimport VisibilityIcon from '@material-ui/icons/Visibility'\nimport Button from \"@material-ui/core/Button\"\nimport SearchIcon from '@material-ui/icons/Search'\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\nimport {useTheme} from '@material-ui/core/styles'\n\nconst useStyles = makeStyles(theme => ({\n    menu: {\n        marginRight: 10\n    },\n    brand: {\n        textDecoration: 'none',\n        color: 'inherit'\n    },\n    overlay: {\n        position: 'fixed',\n        width: '100%',\n        height: '100vh',\n        top: 0,\n        left: 0,\n        background: 'rgba(9, 9, 10, 0.6)',\n        zIndex: 1\n    },\n}))\n\nconst CustomAppBar = withStyles({\n    root: {\n        color: '#333',\n        background: 'white',\n        boxShadow: '0 1px 2px rgba(0, 0, 0, 0.1)'\n    }\n})(AppBar)\n\nconst NavButton = withStyles(theme => ({\n    root: {\n        backgroundColor: 'rgba(0, 0, 0, 0.05)',\n        marginRight: theme.spacing(1),\n        marginLeft: theme.spacing(1),\n        paddingLeft: theme.spacing(2),\n        paddingRight: theme.spacing(2),\n\n        \"&:hover\": {\n            backgroundColor: 'rgba(0, 0, 0, 0.08)',\n        }\n    }\n}))(Button)\n\nfunction Navbar(props) {\n    const theme = useTheme();\n    const {onMenu} = props\n    const {query, foundMovies, entities, location} = props\n    const {changeQuery, searchMovies, cancelSearch} = props\n    const classes = useStyles()\n\n    const isMobile = useMediaQuery(theme.breakpoints.down('sm'))\n    const [showMobileSearch, setShowMobileSearch] = useState(false)\n    const [showOutput, setShowOutput] = useState(false)\n\n    // add 'genres' property\n    const output = foundMovies.map(movie => ({...movie, genres: movie.genreIds.map(id => entities.genresById[id])}))\n\n    const searchDebounce = useCallback(debounce(function (value) {\n        searchMovies(value)\n        setShowOutput(true)\n    }, 600), [searchMovies])\n\n    function handleSearchInput(e) {\n        const value = e.target.value\n        changeQuery(value)\n        cancelSearch()\n        if (value.length && value.trim().length < 2) return\n        searchDebounce(value)\n    }\n\n    // disable/enable scrolling of body element\n    useEffect(function () {\n        bodyScrolling(!(showOutput && foundMovies.length))\n    }, [showOutput, foundMovies])\n\n    // hide output when location (page) has changed\n    useEffect(function () {\n        setShowOutput(false)\n    }, [location])\n\n    const mobileNavBar = () => (\n        <React.Fragment>\n            {showOutput && <div className={classes.overlay} onClick={e => setShowOutput(false)}/>}\n            <CustomAppBar position=\"sticky\">\n                <Toolbar>\n                    <IconButton onClick={onMenu} edge=\"start\" color=\"inherit\" aria-label=\"menu\" className={classes.menu}>\n                        <MenuIcon/>\n                    </IconButton>\n                    <Typography variant=\"h6\" noWrap>\n                        <Link to=\"/\" className={classes.brand}>React Movie App</Link>\n                    </Typography>\n                    <IconButton onClick={e => setShowMobileSearch(!showMobileSearch)} style={{marginLeft: 'auto'}}>\n                        <SearchIcon />\n                    </IconButton>\n                </Toolbar>\n                {showMobileSearch && <div style={{margin: '5px 15px 10px 15px'}}>\n                    <SearchInput\n                        value={query}\n                        style={{width: '100%', height: 50}}\n                        placeholder={\"Search...\"}\n                        onChange={handleSearchInput}\n                        onBlur={e => !query && setShowOutput(false) }\n                        onFocus={() => setShowOutput(true)}\n                    />\n                </div>}\n            </CustomAppBar>\n            {(!!output.length && showOutput) && <SearchOutput movies={output}/>}\n        </React.Fragment>\n    )\n\n    const desktopNavbar = () => (\n        <React.Fragment>\n            {showOutput && <div className={classes.overlay} onClick={e => setShowOutput(false)}/>}\n            <CustomAppBar position=\"sticky\">\n                <Toolbar>\n                    <IconButton onClick={onMenu} edge=\"start\" color=\"inherit\" aria-label=\"menu\" className={classes.menu}>\n                        <MenuIcon/>\n                    </IconButton>\n                    <Typography variant=\"h6\" noWrap>\n                        <Link to=\"/\" className={classes.brand}>React Moive App</Link>\n                    </Typography>\n                    <SearchInput\n                        value={query}\n                        placeholder={\"Search...\"}\n                        style={{marginLeft: 30, width: 250}}\n                        onChange={handleSearchInput}\n                        onBlur={e => !query && setShowOutput(false) }\n                        onFocus={() => setShowOutput(true)}\n                    />\n                    <div style={{marginLeft: 'auto'}}>\n                        <NavButton component={Link} to=\"/favorites\" color=\"inherit\">\n                            <FavoriteIcon style={{marginRight: 10, fill: \"#f50057\"}}/>\n                            Favorites\n                        </NavButton>\n                        <NavButton component={Link} to=\"/visited\" color=\"inherit\">\n                            <VisibilityIcon style={{marginRight: 10, fill: '#115293'}}/>\n                            Visited\n                        </NavButton>\n                    </div>\n                </Toolbar>\n            </CustomAppBar>\n            {(!!output.length && showOutput) && <SearchOutput movies={output}/>}\n        </React.Fragment>\n    )\n\n    return (\n        isMobile ? mobileNavBar() : desktopNavbar()\n    )\n}\n\nfunction bodyScrolling(enabled) {\n    document.body.style.overflow = enabled ? '' : 'hidden'\n}\n\nfunction mapStateToProps(state) {\n    return {\n        ...state.search,\n        entities: state.entities,\n        location: state.router.location.pathname\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        searchMovies: (query) => dispatch(searchMovies(query)),\n        cancelSearch: () => dispatch(cancelSearch()),\n        changeQuery: (value) => dispatch(changeQuery(value))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Navbar)\n","export function debounce(func, wait, immediate = false) {\n    let timeout\n    return function () {\n        let context = this, args = arguments\n        let later = function () {\n            timeout = null\n            if (!immediate) func.apply(context, args)\n        }\n        let callNow = immediate && !timeout\n        clearTimeout(timeout)\n        timeout = setTimeout(later, wait)\n        if (callNow) func.apply(context, args)\n    }\n}\n","export const MOVIE_PAGE_FETCH_REQUEST = 'MOVIE_PAGE_FETCH_REQUEST'\nexport const MOVIE_PAGE_FETCH_SUCCESS = 'MOVIE_PAGE_FETCH_SUCCESS'\nexport const MOVIE_PAGE_FETCH_FAIL = 'MOVIE_PAGE_FETCH_FAIL'\n\nexport const SIMILAR_MOVIES_FETCH_REQUEST = 'SIMILAR_MOVIES_FETCH_REQUEST'\nexport const SIMILAR_MOVIES_FETCH_SUCCESS = 'SIMILAR_MOVIES_FETCH_SUCCESS'\nexport const SIMILAR_MOVIES_FETCH_FAIL = 'SIMILAR_MOVIES_FETCH_FAIL'\n\nexport const RECOMMENDED_MOVIES_FETCH_REQUEST = 'RECOMMENDED_MOVIES_FETCH_REQUEST'\nexport const RECOMMENDED_MOVIES_FETCH_SUCCESS = 'RECOMMENDED_MOVIES_FETCH_SUCCESS'\nexport const RECOMMENDED_MOVIES_FETCH_FAIL = 'RECOMMENDED_MOVIES_FETCH_FAIL'\n","import Skeleton from \"@material-ui/lab/Skeleton\"\nimport Grid from \"@material-ui/core/Grid\"\nimport Rating from \"@material-ui/lab/Rating\"\nimport React from \"react\"\nimport {makeStyles} from \"@material-ui/core/styles\"\n\nconst useStyles = makeStyles(theme => ({\n    skeleton: {\n        background: 'rgb(181, 181, 181)',\n    },\n    icon: {\n        color: 'rgb(181, 181, 181)'\n    }\n}))\n\nfunction MoviePagePlaceholder() {\n    const classes = useStyles()\n\n    const subtitle = (width) => <Skeleton variant=\"text\" width={width} height={28} className={classes.skeleton}/>\n    const text = (rows) => Array.from(new Array(rows)).map((_, i) => (\n        <Skeleton variant=\"text\" key={i} width={100 - Math.random() * 8 + '%'} height={20} className={classes.skeleton}/>\n    ))\n\n    return (\n        <Grid container spacing={7}>\n            <Grid item md={3}>\n                <Skeleton variant=\"rect\" height={356} style={{borderRadius: 10}} width={'100%'} className={classes.skeleton}/>\n            </Grid>\n            <Grid item md={8} style={{color: 'white'}}>\n                <Skeleton variant=\"text\" width={100} height={20} className={classes.skeleton}/>\n                <Skeleton variant=\"text\" width={300} height={34} className={classes.skeleton}/>\n                <div>\n                    <Rating value={4} classes={{iconEmpty: classes.icon}} readOnly/>\n                </div>\n                {subtitle(50)}\n                {text(4)}\n                <br/>\n                {subtitle(70)}\n                {text(3)}\n            </Grid>\n        </Grid>\n    )\n}\n\nexport default MoviePagePlaceholder\n","export const Formatter = {\n    formatDate(date) {\n        const monthNames = [\n            \"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\n            \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\n        ]\n        return `${date.getDay()} ${monthNames[date.getMonth()]}, ${date.getFullYear()}`\n    },\n    numberWithCommas(x) {\n        return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n    }\n}\n","import React from 'react'\nimport Typography from \"@material-ui/core/Typography\"\nimport {makeStyles} from \"@material-ui/core/styles\"\n\nconst useStyles = makeStyles(theme => ({\n    container: {\n        \"height\": 300,\n        \"background\": \"#f3f3f3\",\n        \"borderRadius\": 4,\n        \"display\": \"flex\",\n        \"justifyContent\": \"center\",\n        \"alignItems\": \"center\",\n        \"color\": \"rgba(0, 0, 0, 0.25)\"\n    }\n}))\n\n\nfunction EmptyBlock({text}) {\n    const classes = useStyles()\n    return (\n        <div className={classes.container}>\n            <Typography variant=\"body1\">{text}</Typography>\n        </div>\n    )\n}\n\nexport default EmptyBlock\n","import React, {useCallback, useEffect} from 'react'\nimport {useParams} from \"react-router\"\nimport {connect} from \"react-redux\"\nimport LazyLoad from 'react-lazyload'\nimport Container from \"@material-ui/core/Container\"\nimport Grid from \"@material-ui/core/Grid\"\nimport Typography from \"@material-ui/core/Typography\"\nimport Rating from \"@material-ui/lab/Rating\"\nimport {makeStyles} from \"@material-ui/core/styles\"\nimport {fetchMoviePage, fetchRecommendedMovies, fetchSimilarMovies} from \"../store/domains/movie/movie.actions\"\nimport {getMovie} from \"../store/utils\"\nimport MovieBrowser from \"./MovieBrowser\"\nimport MoviePagePlaceholder from \"./placeholders/MoviePagePlaceholder\"\nimport FavoriteIcon from \"@material-ui/icons/Favorite\"\nimport Button from \"@material-ui/core/Button\"\nimport {makeMovieVisited, toggleFavorite} from \"../store/domains/user/user.actions\"\nimport {Formatter} from \"./utils/formatter\"\nimport EmptyBlock from \"./placeholders/EmptyBlock\"\n\nfunction Movie(props) {\n    const {id: urlId} = useParams()\n    const {\n        isAppReady,\n        movie,\n        fetchMovie,\n        toggleFavorite,\n        makeMovieVisited,\n    } = props\n\n    useEffect(function () {\n        fetchMovie(urlId)\n        window.scrollTo({top: 0, left: 0})\n    }, [urlId, fetchMovie])\n\n    useEffect(function () {\n        if(movie.isFetched) makeMovieVisited(movie.id)\n    }, [movie.id, makeMovieVisited])\n\n    return (\n        <React.Fragment>\n            <MovieInfo movie={movie} loaded={isAppReady && movie.isFetched} onFavorite={toggleFavorite}/>\n            <MovieRecommendations {...props} id={urlId}/>\n        </React.Fragment>\n    )\n}\n\nconst useStyles = makeStyles(theme => ({\n    movieContainer: {\n        paddingTop: 50,\n        paddingBottom: 50,\n    },\n    backdrop: {\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        zIndex: -1,\n        '&:after': {\n            position: 'absolute',\n            content: \"''\",\n            display: 'block',\n            top: 0,\n            left: 0,\n            width: '100%',\n            height: '100%',\n            background: 'rgba(30, 47, 60, 0.75)',\n            backgroundImage: 'radial-gradient(circle at 20% 50%, rgba(30, 47, 60, 0.75) 0%, rgba(48, 65, 78, 0.75) 100%)'\n        }\n    },\n    backdropImage: {\n        display: 'block',\n        width: '100%',\n        height: '100%',\n        objectFit: 'cover',\n    },\n    poster: {\n        width: '100%',\n        borderRadius: 10,\n        boxShadow: '0px 3px 20px #0000003b',\n    },\n    releaseDate: {\n        fontSize: '11pt',\n        color: '#dadde2'\n    },\n    vote: {\n        display: 'flex',\n        alignItems: 'center',\n        fontSize: '12pt'\n    },\n    genreList: {\n        listStyle: 'none',\n        padding: 0,\n        display: 'flex',\n        flexWrap: 'wrap',\n    },\n    genre: {\n        cursor: 'pointer',\n        padding: '1px 6px',\n        marginRight: 10,\n        border: '1px solid white',\n        borderRadius: 4,\n        fontSize: '10pt'\n    },\n    subtitle: {\n        marginBottom: 8,\n        fontSize: '13pt'\n    },\n    crewList: {\n        listStyle: 'none',\n        padding: 0,\n    },\n}))\n\nfunction MovieInfo({movie, loaded, onFavorite}) {\n    const {\n        id,\n        title,\n        genres,\n        duration,\n        budget,\n        backdropImageUrl,\n        posterImageUrl,\n        releaseDate,\n        productionCountries,\n        voteAverage,\n        legend,\n        overview,\n        crew,\n        actors,\n\n        isFavorite\n    } = movie\n\n    const classes = useStyles()\n\n    const poster = posterImageUrl || require('../assets/images/abstract_movie_poster.svg')\n    // TODO Add backdrop fallback\n    // const backdrop = backdropImageUrl\n\n    // TODO Sort actors and crew by their popularity/importance\n\n    return (\n        <main style={{position: 'relative'}}>\n            <div className={classes.backdrop}>\n                <img className={classes.backdropImage} src={backdropImageUrl} alt={\"Backdrop of \" + title}/>\n            </div>\n            <Container className={classes.movieContainer}>\n                {loaded ?\n                    <Grid container spacing={7}>\n                        <Grid item md={3}>\n                            <img className={classes.poster} src={poster} alt={\"Poster of \" + title}/>\n                        </Grid>\n                        <Grid item md={8} style={{color: 'white'}}>\n                            <div className={classes.releaseDate}>\n                                {Formatter.formatDate(releaseDate)} ({productionCountries.join(', ')})\n                            </div>\n                            <Typography variant={\"h4\"} style={{fontWeight: 'bold'}} component={\"h1\"}>\n                                {title}\n                            </Typography>\n                            <ul className={classes.genreList}>\n                                {genres.map(genre => (\n                                    <li className={classes.genre} key={genre}>{genre}</li>\n                                ))}\n                            </ul>\n                            <div className={classes.vote}>\n                                <Rating value={voteAverage / 2} readOnly/>\n                                <span style={{margin: '2px 0px 0 6px'}}>{voteAverage}/10</span>\n                                <Button\n                                    style={{marginLeft: 16}}\n                                    onClick={() => onFavorite(id)}\n                                    variant={isFavorite ? \"contained\" : \"outlined\"}\n                                    color=\"secondary\"\n                                    aria-label=\"like\"\n                                >\n                                    <FavoriteIcon/>\n                                </Button>\n                            </div>\n                            <div style={{marginTop: 10}}>\n                                <Typography component={\"div\"} style={{marginRight: 15}}>\n                                    <b>Duration:</b> {duration} min.\n                                </Typography>\n                                <Typography component={\"div\"}>\n                                    <b>Budget:</b> {budget ? '$' + Formatter.numberWithCommas(budget) : '-'}\n                                </Typography>\n                            </div>\n                            {legend && <React.Fragment>\n                                <h3 className={classes.subtitle}>Legend</h3>\n                                <Typography variant={\"body1\"}>{legend}</Typography>\n                            </React.Fragment>}\n                            {overview && <React.Fragment>\n                                <h3 className={classes.subtitle}>Overview</h3>\n                                <Typography variant={\"body1\"}>{overview}</Typography>\n                            </React.Fragment>}\n                            {crew.length && <React.Fragment>\n                                <h3 className={classes.subtitle}>Crew</h3>\n                                <Grid container spacing={3} component=\"ul\" className={classes.crewList}>\n                                    {crew.slice(0, 4).map((person, i) => (\n                                        <Grid item md={3} sm={6} component=\"li\" key={i} style={{paddingRight: 16}}>\n                                            <Typography variant={\"body2\"}\n                                                        style={{fontWeight: 'bold'}}>{person.name}</Typography>\n                                            <Typography\n                                                variant={\"body2\"}>{person.department}, {person.job}</Typography>\n                                        </Grid>\n                                    ))}\n                                </Grid>\n                            </React.Fragment>}\n                        </Grid>\n                    </Grid> :\n                    <MoviePagePlaceholder/>}\n            </Container>\n        </main>\n    )\n}\n\nfunction MovieRecommendations(props) {\n    const {\n        id,\n\n        movie,\n        entities,\n        user,\n\n        toggleFavorite,\n        fetchSimilarMovies,\n        fetchRecommendedMovies,\n    } = props\n\n    const {recommendedMovies: recommended, similarMovies: similar} = movie\n\n    const MOVIES_PER_LIST = 6\n\n    const recommendedMovies = recommended.ids.slice(0, MOVIES_PER_LIST).map(id => getMovie(id, entities, user))\n    const similarMovies = similar.ids.slice(0, MOVIES_PER_LIST).map(id => getMovie(id, entities, user))\n\n    const fetchSimilarMoviesCb = useCallback(() => fetchSimilarMovies(id), [id, fetchSimilarMovies])\n    const fetchRecommendedMoviesCb = useCallback(() => fetchRecommendedMovies(id), [id, fetchRecommendedMovies])\n\n    return (\n        <Container>\n            <section>\n                <h2>Recommended movies</h2>\n                <LazyLoad height={400}>\n                    <MovieList\n                        isFetching={recommended.isFetching}\n                        isFetched={recommended.isFetched}\n                        movies={recommendedMovies}\n                        amount={MOVIES_PER_LIST}\n                        fetch={fetchRecommendedMoviesCb}\n                        onFavorite={toggleFavorite}\n                    />\n                </LazyLoad>\n            </section>\n            <section>\n                <h2>Similar movies</h2>\n                <LazyLoad height={400}>\n                    <MovieList\n                        isFetching={similar.isFetching}\n                        isFetched={similar.isFetched}\n                        movies={similarMovies}\n                        amount={MOVIES_PER_LIST}\n                        fetch={fetchSimilarMoviesCb}\n                        onFavorite={toggleFavorite}\n                    />\n                </LazyLoad>\n            </section>\n        </Container>\n    )\n}\n\n\nfunction MovieList({isFetching, isFetched, movies = [], amount, fetch, onFavorite}) {\n\n    useEffect(function () {\n        fetch()\n    }, [fetch])\n\n    if (isFetched && !movies.length) return (\n        <EmptyBlock text={\"There is no data for this movie\"} />\n    )\n\n    return (\n        <MovieBrowser placeholdersAmount={amount}\n                      isFetching={isFetching}\n                      isFetched={isFetched}\n                      movies={movies}\n                      onFavorite={onFavorite}\n        />\n    )\n}\n\nfunction mapStateToProps(state) {\n    let movie = state.movie.isFetched ? getMovie(state.movie.id, state.entities, state.user) : {}\n    movie = {...movie, ...state.movie}\n    return {\n        isAppReady: state.common.isAppReady,\n        movie: movie,\n        entities: state.entities,\n        user: state.user\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        fetchMovie: (id) => dispatch(fetchMoviePage(id)),\n        fetchSimilarMovies: (id) => dispatch(fetchSimilarMovies(id)),\n        fetchRecommendedMovies: (id) => dispatch(fetchRecommendedMovies(id)),\n        toggleFavorite: (id) => dispatch(toggleFavorite(id)),\n        makeMovieVisited: (id) => dispatch(makeMovieVisited(id))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Movie)\n","import {MOVIEDB_MIDDLEWARE} from \"../../middlewares/moviedb-api\"\nimport {\n    MOVIE_PAGE_FETCH_FAIL,\n    MOVIE_PAGE_FETCH_REQUEST,\n    MOVIE_PAGE_FETCH_SUCCESS,\n    RECOMMENDED_MOVIES_FETCH_FAIL,\n    RECOMMENDED_MOVIES_FETCH_REQUEST,\n    RECOMMENDED_MOVIES_FETCH_SUCCESS,\n    SIMILAR_MOVIES_FETCH_FAIL,\n    SIMILAR_MOVIES_FETCH_REQUEST,\n    SIMILAR_MOVIES_FETCH_SUCCESS\n} from \"./movie.types\"\nimport {ADD_ERROR} from \"../ui/ui.types\"\n\nexport function fetchMoviePage(id) {\n    return {\n        type: \"FETCH_MOVIE_PAGE\",\n        payload: null,\n        meta: {\n            target: MOVIEDB_MIDDLEWARE,\n            method: \"GET\",\n            url: \"/movie/\" + id,\n            params: {\n                append_to_response: 'credits'\n            },\n            handlers: {\n                request: MOVIE_PAGE_FETCH_REQUEST,\n                success: MOVIE_PAGE_FETCH_SUCCESS,\n                fail: [ADD_ERROR, MOVIE_PAGE_FETCH_FAIL]\n            }\n        }\n    }\n}\n\nexport function fetchSimilarMovies(movieId, page = 1) {\n    return {\n        type: \"FETCH_SIMILAR_MOVIES\",\n        payload: null,\n        meta: {\n            target: MOVIEDB_MIDDLEWARE,\n            method: \"GET\",\n            url: `movie/${movieId}/similar`,\n            params: {page},\n            handlers: {\n                request: SIMILAR_MOVIES_FETCH_REQUEST,\n                success: SIMILAR_MOVIES_FETCH_SUCCESS,\n                fail: [ADD_ERROR, SIMILAR_MOVIES_FETCH_FAIL]\n            }\n        }\n    }\n}\n\nexport function fetchRecommendedMovies(movieId, page = 1) {\n    return {\n        type: \"FETCH_RECOMMENDED_MOVIES\",\n        payload: null,\n        meta: {\n            target: MOVIEDB_MIDDLEWARE,\n            method: \"GET\",\n            url: `movie/${movieId}/recommendations`,\n            params: {page},\n            handlers: {\n                request: RECOMMENDED_MOVIES_FETCH_REQUEST,\n                success: RECOMMENDED_MOVIES_FETCH_SUCCESS,\n                fail: [ADD_ERROR, RECOMMENDED_MOVIES_FETCH_FAIL]\n            }\n        }\n    }\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", null, React.createElement(\"style\", null, \".cls-1,.cls-4{fill:#231f20;}.cls-1,.cls-10{opacity:0.1;}.cls-2{fill:#27aae1;}.cls-3{opacity:0.2;}.cls-5{fill:#f1f2f2;}.cls-6{fill:#e6e7e8;}.cls-7{fill:#fff;}.cls-12,.cls-13,.cls-8{fill:#414042;}.cls-9{fill:#b2875d;}.cls-11{fill:#c49a6c;}.cls-12{font-size:64.14px;font-family:Montserrat-Black, Montserrat Black;}.cls-13{font-size:13.47px;font-family:Montserrat-Light, Montserrat Light;}.cls-14{letter-spacing:-0.05em;}.cls-15{letter-spacing:-0.01em;}.cls-16{letter-spacing:-0.01em;}.cls-17{letter-spacing:-0.01em;}.cls-18{letter-spacing:0em;}\"));\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"title\", null, \"Asset 1\");\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  id: \"Layer_2\",\n  \"data-name\": \"Layer 2\"\n}, React.createElement(\"g\", {\n  id: \"BACKGROUND_1\",\n  \"data-name\": \"BACKGROUND 1\"\n}, React.createElement(\"path\", {\n  className: \"cls-1\",\n  d: \"M294.19,257.12c0,6.6-65.85,5.75-147.09,5.75S0,263.72,0,257.12s65.86-11.94,147.1-11.94S294.19,250.52,294.19,257.12Z\"\n}), React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M198.76,94.76a53.54,53.54,0,1,1-53.53-53.53A53.53,53.53,0,0,1,198.76,94.76Z\"\n}), React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M180.83,50.75A50.75,50.75,0,1,1,130.08,0,50.75,50.75,0,0,1,180.83,50.75Z\"\n}), React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M209.67,47.47a28.06,28.06,0,1,1-28.06-28.06A28.05,28.05,0,0,1,209.67,47.47Z\"\n}), React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M163,87.54a51.79,51.79,0,1,1-51.79-51.78A51.79,51.79,0,0,1,163,87.54Z\"\n}), React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M236.66,91.34a47.8,47.8,0,1,1-47.79-47.8A47.78,47.78,0,0,1,236.66,91.34Z\"\n}), React.createElement(\"g\", {\n  className: \"cls-3\"\n}, React.createElement(\"polygon\", {\n  className: \"cls-4\",\n  points: \"172.1 33.91 172.13 33.89 108.1 33.89 108.1 133.89 201.25 134.34 189.53 51.45 172.1 33.91\"\n})), React.createElement(\"polygon\", {\n  className: \"cls-5\",\n  points: \"169.03 32.91 169.06 32.89 105.1 32.89 105.1 132.89 188.1 132.89 188.1 51.99 169.03 32.91\"\n}), React.createElement(\"rect\", {\n  className: \"cls-6\",\n  x: 109.1,\n  y: 40.89,\n  width: 64,\n  height: 1\n}), React.createElement(\"rect\", {\n  className: \"cls-6\",\n  x: 109.1,\n  y: 50.89,\n  width: 74,\n  height: 1\n}), React.createElement(\"rect\", {\n  className: \"cls-6\",\n  x: 109.1,\n  y: 60.89,\n  width: 74,\n  height: 1\n}), React.createElement(\"rect\", {\n  className: \"cls-6\",\n  x: 109.1,\n  y: 69.89,\n  width: 74,\n  height: 1\n}), React.createElement(\"rect\", {\n  className: \"cls-6\",\n  x: 109.1,\n  y: 79.89,\n  width: 74,\n  height: 1\n}), React.createElement(\"rect\", {\n  className: \"cls-6\",\n  x: 109.1,\n  y: 89.89,\n  width: 74,\n  height: 1\n}), React.createElement(\"rect\", {\n  className: \"cls-6\",\n  x: 109.1,\n  y: 99.89,\n  width: 74,\n  height: 1\n}), React.createElement(\"rect\", {\n  className: \"cls-6\",\n  x: 109.1,\n  y: 109.89,\n  width: 74,\n  height: 1\n}), React.createElement(\"rect\", {\n  className: \"cls-6\",\n  x: 109.1,\n  y: 119.89,\n  width: 74,\n  height: 1\n}), React.createElement(\"rect\", {\n  className: \"cls-6\",\n  x: 109.1,\n  y: 129.89,\n  width: 74,\n  height: 1\n}), React.createElement(\"polygon\", {\n  className: \"cls-7\",\n  points: \"188.25 51.89 169.1 51.89 169.1 32.74 188.25 51.89\"\n}), React.createElement(\"path\", {\n  className: \"cls-7\",\n  d: \"M139.53,68.52A11.73,11.73,0,1,1,127.8,56.8,11.73,11.73,0,0,1,139.53,68.52Z\"\n}), React.createElement(\"path\", {\n  className: \"cls-8\",\n  d: \"M136.49,68.52a8.69,8.69,0,1,1-8.69-8.69A8.69,8.69,0,0,1,136.49,68.52Z\"\n}), React.createElement(\"path\", {\n  className: \"cls-7\",\n  d: \"M128.14,62.52a3,3,0,1,1-3-3A3,3,0,0,1,128.14,62.52Z\"\n}), React.createElement(\"path\", {\n  className: \"cls-7\",\n  d: \"M123.67,68.71a1.48,1.48,0,1,1-1.47-1.47A1.47,1.47,0,0,1,123.67,68.71Z\"\n}), React.createElement(\"path\", {\n  className: \"cls-7\",\n  d: \"M127.7,72.71a2.25,2.25,0,1,1-2.25-2.25A2.25,2.25,0,0,1,127.7,72.71Z\"\n}), React.createElement(\"path\", {\n  className: \"cls-7\",\n  d: \"M135.3,69.94c-2.59.4-2.92.73-3.32,3.32-.4-2.59-.73-2.92-3.33-3.32,2.6-.41,2.93-.73,3.33-3.33C132.38,69.21,132.71,69.53,135.3,69.94Z\"\n}), React.createElement(\"path\", {\n  className: \"cls-7\",\n  d: \"M177.16,68.52A11.73,11.73,0,1,1,165.43,56.8,11.73,11.73,0,0,1,177.16,68.52Z\"\n}), React.createElement(\"path\", {\n  className: \"cls-8\",\n  d: \"M174.13,68.52a8.7,8.7,0,1,1-8.7-8.69A8.69,8.69,0,0,1,174.13,68.52Z\"\n}), React.createElement(\"path\", {\n  className: \"cls-7\",\n  d: \"M165.77,62.52a3,3,0,1,1-3-3A3,3,0,0,1,165.77,62.52Z\"\n}), React.createElement(\"path\", {\n  className: \"cls-7\",\n  d: \"M161.3,68.71a1.47,1.47,0,1,1-1.47-1.47A1.47,1.47,0,0,1,161.3,68.71Z\"\n}), React.createElement(\"path\", {\n  className: \"cls-7\",\n  d: \"M165.34,72.71a2.25,2.25,0,1,1-2.25-2.25A2.25,2.25,0,0,1,165.34,72.71Z\"\n}), React.createElement(\"path\", {\n  className: \"cls-7\",\n  d: \"M172.94,69.94c-2.6.4-2.93.73-3.33,3.32-.4-2.59-.73-2.92-3.32-3.32,2.59-.41,2.92-.73,3.32-3.33C170,69.21,170.34,69.53,172.94,69.94Z\"\n}), React.createElement(\"path\", {\n  className: \"cls-8\",\n  d: \"M162,102a1.75,1.75,0,0,1-1.74-1.75,13.6,13.6,0,0,0-27.2,0,1.75,1.75,0,0,1-3.5,0,17.1,17.1,0,1,1,34.19,0A1.75,1.75,0,0,1,162,102Z\"\n}), React.createElement(\"polygon\", {\n  className: \"cls-9\",\n  points: \"244.1 255.89 48.1 255.89 48.11 104.89 244.1 104.89 244.1 255.89\"\n}), React.createElement(\"g\", {\n  className: \"cls-10\"\n}, React.createElement(\"rect\", {\n  className: \"cls-7\",\n  x: 48.1,\n  y: 167.89,\n  width: 20,\n  height: 11\n})), React.createElement(\"g\", {\n  className: \"cls-10\"\n}, React.createElement(\"rect\", {\n  className: \"cls-7\",\n  x: 48.1,\n  y: 193.89,\n  width: 20,\n  height: 11\n})), React.createElement(\"g\", {\n  className: \"cls-10\"\n}, React.createElement(\"rect\", {\n  className: \"cls-7\",\n  x: 48.1,\n  y: 218.89,\n  width: 20,\n  height: 11\n})), React.createElement(\"g\", {\n  className: \"cls-10\"\n}, React.createElement(\"rect\", {\n  className: \"cls-7\",\n  x: 224.1,\n  y: 167.89,\n  width: 20,\n  height: 11\n})), React.createElement(\"g\", {\n  className: \"cls-10\"\n}, React.createElement(\"rect\", {\n  className: \"cls-7\",\n  x: 224.1,\n  y: 193.89,\n  width: 20,\n  height: 11\n})), React.createElement(\"g\", {\n  className: \"cls-10\"\n}, React.createElement(\"rect\", {\n  className: \"cls-7\",\n  x: 224.1,\n  y: 218.89,\n  width: 20,\n  height: 11\n})), React.createElement(\"polygon\", {\n  className: \"cls-11\",\n  points: \"282.38 145.4 241.97 107.45 244.38 104.9 284.78 142.86 282.38 145.4\"\n}), React.createElement(\"polygon\", {\n  className: \"cls-11\",\n  points: \"9.92 145.4 50.33 107.45 47.92 104.9 7.52 142.86 9.92 145.4\"\n}), React.createElement(\"polygon\", {\n  className: \"cls-11\",\n  points: \"256.73 154.89 35.56 154.89 48.59 104.89 243.71 104.89 256.73 154.89\"\n}), React.createElement(\"text\", {\n  className: \"cls-12\",\n  transform: \"translate(80.24 213.43)\"\n}, \"404\"), React.createElement(\"text\", {\n  className: \"cls-13\",\n  transform: \"translate(86.36 234.7)\"\n}, React.createElement(\"tspan\", {\n  className: \"cls-14\"\n}, \"P\"), React.createElement(\"tspan\", {\n  className: \"cls-15\",\n  x: 9.03,\n  y: 0\n}, \"A\"), React.createElement(\"tspan\", {\n  x: 18.39,\n  y: 0\n}, \"GE N\"), React.createElement(\"tspan\", {\n  className: \"cls-16\",\n  x: 52.25,\n  y: 0\n}, \"O\"), React.createElement(\"tspan\", {\n  x: 63.4,\n  y: 0\n}, \"T \"), React.createElement(\"tspan\", {\n  className: \"cls-17\",\n  x: 74.45,\n  y: 0\n}, \"F\"), React.createElement(\"tspan\", {\n  className: \"cls-18\",\n  x: 82.83,\n  y: 0\n}, \"OUND\"))));\n\nvar Svg404 = function Svg404(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 294.19 262.91\",\n    ref: svgRef\n  }, props), _ref2, title === undefined ? _ref3 : title ? React.createElement(\"title\", null, title) : null, _ref4);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(Svg404, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/404.4731eafe.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react'\nimport Container from \"@material-ui/core/Container\"\nimport {makeStyles} from \"@material-ui/core\"\nimport {Link} from \"react-router-dom\"\n// Source: https://www.freepik.com/free-vector/404-error-design-with-box_1534894.htm#page=1&query=sorry&position=1\nimport {ReactComponent as Image404} from '../assets/images/404.svg'\n\nconst useStyles = makeStyles(theme => ({\n    container: {\n        minHeight: \"80vh\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        flexDirection: \"column\",\n        alignItems: \"center\"\n    },\n    title: {\n        fontSize: '33pt',\n        marginTop: 10\n    },\n    subtitle: {\n        fontSize: '14pt'\n    },\n    action: {\n        textDecoration: 'none',\n        color: '#0037ff',\n        margin: 6,\n        \"&:hover\": {\n            textDecoration: 'underline'\n        }\n    }\n}))\n\nfunction Page404(props) {\n    const classes = useStyles()\n\n    return (\n        <Container className={classes.container}>\n            <Image404 style={{height: 300}} />\n            <div className={classes.title}>Ooops! We're sorry! </div>\n            <div className={classes.subtitle}>\n                Try searching or go to\n                <Link className={classes.action} to=\"/\">Home page.</Link>\n            </div>\n        </Container>\n    )\n}\n\nexport default Page404\n","export const MOVIE_FETCH_REQUEST = 'MOVIE_FETCH_REQUEST'\nexport const MOVIE_FETCH_SUCCESS = 'MOVIE_FETCH_SUCCESS'\nexport const MOVIE_FETCH_FAIL = 'MOVIE_FETCH_FAIL'\n","import {MOVIEDB_MIDDLEWARE} from \"../../middlewares/moviedb-api\"\nimport {MOVIE_FETCH_FAIL, MOVIE_FETCH_REQUEST, MOVIE_FETCH_SUCCESS} from \"./entities.types\"\nimport {ADD_ERROR} from \"../ui/ui.types\"\n\nexport function fetchMovie(id) {\n    return {\n        type: \"FETCH_MOVIE\",\n        payload: null,\n        meta: {\n            target: MOVIEDB_MIDDLEWARE,\n            method: \"GET\",\n            url: \"/movie/\" + id,\n            params: {\n                append_to_response: 'credits'\n            },\n            handlers: {\n                request: MOVIE_FETCH_REQUEST,\n                success: MOVIE_FETCH_SUCCESS,\n                fail: [ADD_ERROR, MOVIE_FETCH_FAIL]\n            }\n        }\n    }\n}\n","import React, {useEffect} from \"react\"\nimport MovieCard from \"./MovieCard\"\nimport MovieCardPlaceholder from \"./placeholders/MovieCardPlaceholder\"\n\n\nfunction MovieCardFetch({id, movie, ready, fetch, onFavorite}) {\n\n    useEffect(function () {\n        if (!movie && ready) fetch(id)\n    }, [id, movie, fetch, ready])\n\n    return (\n        !!movie ? <MovieCard {...movie} onFavorite={onFavorite}/> : <MovieCardPlaceholder/>\n    )\n}\n\nexport default MovieCardFetch\n","import React from 'react'\nimport LazyLoad from 'react-lazyload'\nimport {connect} from \"react-redux\"\nimport Typography from \"@material-ui/core/Typography\"\nimport Container from \"@material-ui/core/Container\"\nimport EmptyBlock from \"./placeholders/EmptyBlock\"\nimport {fetchMovie} from \"../store/domains/entities/entities.actions\"\nimport {getMovie} from \"../store/utils\"\nimport {toggleFavorite} from \"../store/domains/user/user.actions\"\nimport MovieCardFetch from \"./MovieCardFetch\"\nimport MovieList, {MovieListItem} from \"./MovieList\"\n\nfunction Favorites({isAppReady, movieIds, entities, user, fetchMovie, toggleFavorite}) {\n\n    return (\n        <Container style={{margin: '20px auto'}}>\n            <Typography component=\"h2\" variant=\"h4\" style={{margin: '40px 0'}}>\n                Favorite movies\n            </Typography>\n            {!movieIds.length && (\n                <EmptyBlock text=\"You haven't marked favorite movies yet\"/>\n            )}\n            {!!movieIds.length && (\n                <MovieList>\n                    {movieIds.map(id => {\n                        const movie = getMovie(id, entities, user)\n                        return (\n                            <LazyLoad minheight={400} key={id} once>\n                                <MovieListItem>\n                                    <MovieCardFetch\n                                        id={id}\n                                        movie={movie}\n                                        fetch={fetchMovie}\n                                        ready={isAppReady}\n                                        onFavorite={toggleFavorite}\n                                    />\n                                </MovieListItem>\n                            </LazyLoad>\n                        )\n                    })}\n                </MovieList>\n            )}\n        </Container>\n    )\n}\n\nfunction mapStateToProps(state) {\n    return {\n        isAppReady: state.common.isAppReady,\n        movieIds: state.user.favoriteMovieIds,\n        entities: state.entities,\n        user: state.user\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        fetchMovie: (id) => dispatch(fetchMovie(id)),\n        toggleFavorite: (id) => dispatch(toggleFavorite(id))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Favorites)\n","import React from 'react'\nimport {connect} from \"react-redux\"\nimport {Container} from \"@material-ui/core\"\nimport Typography from \"@material-ui/core/Typography\"\nimport EmptyBlock from \"./placeholders/EmptyBlock\"\nimport Button from \"@material-ui/core/Button\"\nimport {getMovie} from \"../store/utils\"\nimport LazyLoad from \"react-lazyload\"\nimport MovieCardFetch from \"./MovieCardFetch\"\nimport {fetchMovie} from \"../store/domains/entities/entities.actions\"\nimport {clearVisitedMovies, toggleFavorite} from \"../store/domains/user/user.actions\"\nimport MovieList, {MovieListItem} from \"./MovieList\"\n\nfunction Visited({isAppReady, movieIds, entities, user, fetchMovie, toggleFavorite, cleanVisitedMovies}) {\n    return (\n        <Container style={{margin: '20px auto'}}>\n            <div style={{display: 'flex', margin: '40px 0'}} >\n                <Typography component=\"h2\" variant=\"h4\">\n                    Visited movies\n                </Typography>\n                <Button onClick={cleanVisitedMovies} style={{marginLeft: 'auto'}} variant=\"outlined\" disabled={!movieIds.length}>Clear history</Button>\n            </div>\n            {!movieIds.length && (\n                <EmptyBlock text=\"You haven't marked favorite movies yet\"/>\n            )}\n            {!!movieIds.length && (\n                <MovieList>\n                    {movieIds.map(id => {\n                        const movie = getMovie(id, entities, user)\n                        return (\n                            <LazyLoad minheight={400} key={id} once>\n                                <MovieListItem>\n                                    <MovieCardFetch\n                                        id={id}\n                                        movie={movie}\n                                        fetch={fetchMovie}\n                                        ready={isAppReady}\n                                        onFavorite={toggleFavorite}\n                                    />\n                                </MovieListItem>\n                            </LazyLoad>\n                        )\n                    })}\n                </MovieList>\n            )}\n        </Container>\n    )\n}\n\nfunction mapStateToProps(state){\n    return {\n        isAppReady: state.common.isAppReady,\n        movieIds: state.user.visitedMovieIds,\n        entities: state.entities,\n        user: state.user\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        fetchMovie: (id) => dispatch(fetchMovie(id)),\n        toggleFavorite: (id) => dispatch(toggleFavorite(id)),\n        cleanVisitedMovies: () => dispatch(clearVisitedMovies())\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Visited)\n","import React from 'react'\nimport Drawer from \"@material-ui/core/Drawer\"\nimport List from \"@material-ui/core/List\"\nimport ListItem from \"@material-ui/core/ListItem\"\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\"\nimport ListItemText from \"@material-ui/core/ListItemText\"\nimport FavoriteIcon from '@material-ui/icons/Favorite'\nimport VisibilityIcon from '@material-ui/icons/Visibility'\nimport Divider from \"@material-ui/core/Divider\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport {Menu as MenuIcon} from \"@material-ui/icons\"\nimport Typography from \"@material-ui/core/Typography\"\nimport {Link} from \"react-router-dom\"\nimport {makeStyles} from \"@material-ui/core\"\n\nconst useStyles = makeStyles(theme => ({\n    list: {\n        width: 250\n    },\n    brand: {\n        textDecoration: 'none',\n        color: 'inherit'\n    },\n}))\n\nfunction Sidebar({open, onClose}) {\n    const classes = useStyles()\n\n    return (\n        <Drawer anchor=\"left\" variant=\"temporary\" open={open} onClose={onClose}>\n            <List className={classes.list}>\n                <ListItem button key=\"favorite\">\n                    <IconButton onClick={onClose} edge=\"start\" color=\"inherit\" aria-label=\"menu\">\n                        <MenuIcon/>\n                    </IconButton>\n                    <Typography variant=\"h6\" noWrap>\n                        <Link className={classes.brand} to=\"/\">Cinema App</Link>\n                    </Typography>\n                </ListItem>\n                <Divider />\n                <ListItem component={Link} to=\"/favorites\" button key=\"favorite\">\n                    <ListItemIcon><FavoriteIcon/></ListItemIcon>\n                    <ListItemText primary=\"Favorites\" />\n                </ListItem>\n                <ListItem component={Link} to=\"/visited\" button key=\"visited\">\n                    <ListItemIcon><VisibilityIcon/></ListItemIcon>\n                    <ListItemText primary=\"Visited\" />\n                </ListItem>\n            </List>\n        </Drawer>\n    )\n}\n\nexport default Sidebar\n","import React, {useEffect, useState} from 'react'\nimport {connect} from \"react-redux\"\nimport {Switch, Route} from \"react-router-dom\"\nimport CssBaseline from \"@material-ui/core/CssBaseline\"\nimport LinearProgress from \"@material-ui/core/LinearProgress\"\nimport {fetchGenres} from \"../store/domains/common/common.actions\"\nimport {SnackbarProvider} from \"notistack\"\nimport Notifier from \"./Notifier\"\nimport Home from \"./Home\"\nimport Navbar from \"./Navbar\"\nimport Movie from \"./Movie\"\nimport Page404 from \"./Page404\"\nimport Favorites from \"./Favorites\"\nimport Visited from \"./Visited\"\nimport Sidebar from \"./Sidebar\"\n\nfunction App(props) {\n    const {isLoading, location, fetchGenres} = props\n    const [showSidebar, setShowSidebar] = useState(false)\n\n    useEffect(function () {\n        fetchGenres()\n    }, [fetchGenres])\n\n    useEffect(function () {\n        setShowSidebar(false)\n    }, [location])\n\n    return (\n        <SnackbarProvider autoHideDuration={30 * 1000}>\n            <CssBaseline/>\n            <Notifier/>\n            {isLoading && <LinearProgress style={{position: 'fixed', top: 0, width: '100%', zIndex: 9999}}/>}\n            <Navbar onMenu={() => setShowSidebar(!showSidebar)}/>\n            <Sidebar open={showSidebar} onClose={() => setShowSidebar(!showSidebar)} />\n            <Switch>\n                <Route exact path=\"/\" component={Home}/>\n                <Route path=\"/movie/:id\" component={Movie}/>\n                <Route path=\"/favorites\" component={Favorites}/>\n                <Route path=\"/visited\" component={Visited}/>\n                <Route component={Page404}/>\n            </Switch>\n        </SnackbarProvider>\n    );\n}\n\nfunction mapStateToProps(state) {\n    return {\n        isLoading: !state.common.isGenresLoaded || state.search.isFetching || state.movie.isFetching,\n        errors: state.ui.errors,\n        location: state.router.location.pathname\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        fetchGenres: () => dispatch(fetchGenres()),\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\n","import {MOVIEDB_MIDDLEWARE} from \"../../middlewares/moviedb-api\"\nimport {GENRES_FETCH_FAIL, GENRES_FETCH_REQUEST, GENRES_FETCH_SUCCESS} from \"./common.types\"\nimport {ADD_ERROR} from \"../ui/ui.types\"\n\nexport function fetchGenres() {\n    return {\n        type: \"FETCH_GENRES\",\n        payload: null,\n        meta: {\n            target: MOVIEDB_MIDDLEWARE,\n            method: \"GET\",\n            url: \"genre/movie/list\",\n            params: null,\n            handlers: {\n                request: GENRES_FETCH_REQUEST,\n                success: GENRES_FETCH_SUCCESS,\n                fail: [ADD_ERROR, GENRES_FETCH_FAIL]\n            }\n        }\n    }\n}\n","import {GENRES_FETCH_FAIL, GENRES_FETCH_REQUEST, GENRES_FETCH_SUCCESS} from \"./common.types\"\n\nconst initialState = {\n    // main state\n    isAppReady: false,\n    // for better control\n    isGenresLoaded: false,\n}\n\nexport function commonReducer(state = initialState, action) {\n    const {type, payload} = action\n    switch (type) {\n        case GENRES_FETCH_REQUEST:\n        case GENRES_FETCH_FAIL:\n            return {...state, isGenresLoaded: false, isAppReady: false}\n        case GENRES_FETCH_SUCCESS:\n            return {...state, isGenresLoaded: true, isAppReady: true}\n        default:\n            return state\n    }\n}\n","const universalMessage = \"Something went wrong\"\n\nexport function prepareError(error) {\n    if(typeof error === 'string') return error\n    else if(error.isAxiosError) {\n        if(!error.response) {\n            return error.message || universalMessage\n        }\n        const status = error.response.status\n        if(status === 404) return universalMessage\n        else if(error.response.message) return error.response.message\n        else return error.message\n    } else if(error.message){\n        return error.message\n    } else if(error.error) {\n        return prepareError(error.error)\n    }\n    return universalMessage\n}\n","import {ADD_ERROR, REMOVE_ERROR} from \"./ui.types\"\nimport {prepareError} from \"./ui.utils\"\nimport {generateId} from \"../../../utils/common\"\n\nconst initialState = {\n    errors: [],\n}\n\nexport function uiReducer(state = initialState, action) {\n    const {type, payload} = action\n    switch (type) {\n        case ADD_ERROR:\n            console.error(payload.error)\n            const error = {\n                id: generateId(),\n                message: prepareError(payload.error),\n                date: new Date()\n            }\n            return {...state, errors: [...state.errors, error]}\n        case REMOVE_ERROR:\n            const {error: {id}} = payload\n            return {...state, errors: state.errors.filter(err => err.id !== id)}\n        default:\n            return state\n    }\n}\n\n","import {USER_CLEARED_VISITED_MOVIES, USER_FAVORITE_TOGGLE, USER_VISITED_MOVIE} from \"./user.types\"\n\nconst initialState = {\n    visitedMovieIds: JSON.parse(localStorage.getItem('visitedMovies')) || [],\n    favoriteMovieIds: JSON.parse(localStorage.getItem('favoriteMovies')) || []\n}\n\nexport function userReducer(state = initialState, action) {\n    const {type, payload} = action\n    switch (type) {\n        case USER_FAVORITE_TOGGLE: {\n            const id = payload.id\n            let favoriteMovieIds\n            const isFavorite = state.favoriteMovieIds.indexOf(id) !== -1\n            if(isFavorite) favoriteMovieIds = state.favoriteMovieIds.filter(movieId => movieId !== id)\n            else favoriteMovieIds = [id,...state.favoriteMovieIds]\n            localStorage.setItem('favoriteMovies', JSON.stringify(favoriteMovieIds))\n            return {...state, favoriteMovieIds: favoriteMovieIds}\n        }\n        case USER_VISITED_MOVIE: {\n            const id = payload.id\n            const visitedMovieIds = [...new Set([id, ...state.visitedMovieIds])]\n            localStorage.setItem('visitedMovies', JSON.stringify(visitedMovieIds))\n            return {...state, visitedMovieIds: visitedMovieIds}\n        }\n        case USER_CLEARED_VISITED_MOVIES: {\n            localStorage.setItem('visitedMovies', JSON.stringify([]))\n            return {...state, visitedMovieIds: []}\n        }\n        default:\n            return state\n    }\n}\n","// TODO Should I put this reducer in another place?\n\nconst moviesFetchInitialState = {\n    ids: [],\n    isFetching: true,\n    isFetched: false,\n    totalMovies: 0\n}\n\n// Sub-reducer\n// ---\n// Used for widget-like components that load list of movies.\n// The reducer keeps only the ids of movies so you should save the full data of movies in 'entities' reducer.\n// TODO Think of a better name\nexport function moviesFetchReducer(prefix, state = moviesFetchInitialState, action) {\n    const {type, payload} = action\n    switch (type) {\n        case prefix + \"_FETCH_REQUEST\":\n            return {...state, isFetching: true}\n        case prefix + \"_FETCH_SUCCESS\":\n            const {total_results: totalMovies, results: movies} = payload\n            const movieIds = movies.map(movie => movie.id)\n            return {\n                ids: [...state.ids, ...movieIds],\n                isFetching: false,\n                isFetched: true,\n                totalMovies: totalMovies\n            }\n        case prefix + \"_FETCH_FAIL\":\n            return {...state, isFetching: false, isFetched: false}\n        default:\n            return state\n    }\n}\n","import {\n    MOVIE_PAGE_FETCH_FAIL,\n    MOVIE_PAGE_FETCH_REQUEST,\n    MOVIE_PAGE_FETCH_SUCCESS,\n    RECOMMENDED_MOVIES_FETCH_FAIL,\n    RECOMMENDED_MOVIES_FETCH_REQUEST,\n    RECOMMENDED_MOVIES_FETCH_SUCCESS,\n    SIMILAR_MOVIES_FETCH_FAIL,\n    SIMILAR_MOVIES_FETCH_REQUEST,\n    SIMILAR_MOVIES_FETCH_SUCCESS\n} from \"./movie.types\"\nimport {moviesFetchReducer} from \"../shared\"\n\nconst initialState = {\n    id: null,\n    isFetching: false,\n    isFetched: false,\n    similarMovies: moviesFetchReducer(\"SIMILAR_MOVIES\", undefined, {}),\n    recommendedMovies: moviesFetchReducer(\"RECOMMENDED_MOVIES\", undefined, {}),\n}\n\nexport function movieReducer(state = initialState, action) {\n    const {type, payload} = action\n    switch (type) {\n        case MOVIE_PAGE_FETCH_REQUEST:\n            return {...initialState, isFetching: true}\n        case MOVIE_PAGE_FETCH_FAIL:\n            return {...state, isFetched: false, isFetching: false}\n        case MOVIE_PAGE_FETCH_SUCCESS:\n            return {\n                ...state,\n                id: payload.id,\n                isFetched: true,\n                isFetching: false,\n            }\n        case SIMILAR_MOVIES_FETCH_REQUEST:\n        case SIMILAR_MOVIES_FETCH_SUCCESS:\n        case SIMILAR_MOVIES_FETCH_FAIL:\n            return {\n                ...state,\n                similarMovies: moviesFetchReducer(\"SIMILAR_MOVIES\", state.similarMovies, action)\n            }\n        case RECOMMENDED_MOVIES_FETCH_REQUEST:\n        case RECOMMENDED_MOVIES_FETCH_SUCCESS:\n        case RECOMMENDED_MOVIES_FETCH_FAIL:\n            return {\n                ...state,\n                recommendedMovies: moviesFetchReducer(\"RECOMMENDED_MOVIES\", state.recommendedMovies, action)\n            }\n        default:\n            return state\n    }\n}\n","import {\n    UPCOMING_MOVIES_FETCH_FAIL,\n    UPCOMING_MOVIES_FETCH_REQUEST,\n    UPCOMING_MOVIES_FETCH_SUCCESS,\n    POPULAR_MOVIES_FETCH_FAIL,\n    POPULAR_MOVIES_FETCH_REQUEST,\n    POPULAR_MOVIES_FETCH_SUCCESS, TOP_RATED_MOVIES_FETCH_FAIL,\n    TOP_RATED_MOVIES_FETCH_REQUEST, TOP_RATED_MOVIES_FETCH_SUCCESS\n} from \"./home.types\"\nimport {moviesFetchReducer} from \"../shared\"\n\nconst initialState = {\n    popularMovies: moviesFetchReducer(\"POPULAR_MOVIES\", undefined, {}),\n    topRatedMovies: moviesFetchReducer(\"TOP_RATED_MOVIES\", undefined, {}),\n    upcomingMovies: moviesFetchReducer(\"UPCOMING_MOVIES\", undefined, {}),\n}\n\nexport function homeReducer(state = initialState, action) {\n    const {type, payload} = action\n    switch (type) {\n        case POPULAR_MOVIES_FETCH_REQUEST:\n        case POPULAR_MOVIES_FETCH_SUCCESS:\n        case POPULAR_MOVIES_FETCH_FAIL:\n            return {\n                ...state,\n                popularMovies: moviesFetchReducer(\"POPULAR_MOVIES\", state.popularMovies, action)\n            }\n        case TOP_RATED_MOVIES_FETCH_REQUEST:\n        case TOP_RATED_MOVIES_FETCH_SUCCESS:\n        case TOP_RATED_MOVIES_FETCH_FAIL:\n            return {\n                ...state,\n                topRatedMovies: moviesFetchReducer(\"TOP_RATED_MOVIES\", state.topRatedMovies, action)\n            }\n        case UPCOMING_MOVIES_FETCH_REQUEST:\n        case UPCOMING_MOVIES_FETCH_SUCCESS:\n        case UPCOMING_MOVIES_FETCH_FAIL:\n            return {\n                ...state,\n                upcomingMovies: moviesFetchReducer(\"UPCOMING_MOVIES\", state.upcomingMovies, action)\n            }\n        default:\n            return state\n    }\n}\n","import {\n    POPULAR_MOVIES_FETCH_SUCCESS,\n    TOP_RATED_MOVIES_FETCH_SUCCESS,\n    UPCOMING_MOVIES_FETCH_SUCCESS\n} from \"../home/home.types\"\nimport {GENRES_FETCH_SUCCESS} from \"../common/common.types\"\nimport {\n    MOVIE_PAGE_FETCH_SUCCESS,\n    RECOMMENDED_MOVIES_FETCH_SUCCESS,\n    SIMILAR_MOVIES_FETCH_SUCCESS\n} from \"../movie/movie.types\"\nimport {MOVIE_FETCH_SUCCESS} from \"./entities.types\"\nimport {prepareMovie} from \"../../utils\"\n\nconst initialState = {\n    moviesById: {},\n    genresById: {}\n}\n\nexport function entitiesReducer(state = initialState, action) {\n    const {type, payload} = action\n    switch (type) {\n        case GENRES_FETCH_SUCCESS: {\n            const genresById = {}\n            for (let genre of payload.genres) {\n                genresById[genre.id] = genre.name\n            }\n            return {...state, genresById: genresById}\n        }\n        case POPULAR_MOVIES_FETCH_SUCCESS:\n        case TOP_RATED_MOVIES_FETCH_SUCCESS:\n        case UPCOMING_MOVIES_FETCH_SUCCESS:\n        case SIMILAR_MOVIES_FETCH_SUCCESS:\n        case RECOMMENDED_MOVIES_FETCH_SUCCESS: {\n            const moviesById = {...state.moviesById}\n            for (let movie of payload.results) {\n                const preparedMovie = prepareMovie({raw: movie, extended: false})\n                if(moviesById[movie.id] && moviesById[movie.id].isExtendedDataLoaded) {\n                    moviesById[movie.id] = {...moviesById[movie.id], ...preparedMovie}\n                } else {\n                    moviesById[movie.id] = preparedMovie\n                }\n                moviesById[movie.id].fetchDate = new Date()\n            }\n            return {...state, moviesById: moviesById}\n        }\n        case MOVIE_PAGE_FETCH_SUCCESS:\n        case MOVIE_FETCH_SUCCESS: {\n            const movie = prepareMovie({raw: payload, extended: true})\n            const moviesById = {...state.moviesById}\n            moviesById[movie.id] = movie\n            moviesById[movie.id].fetchDate = new Date()\n            return {...state, moviesById: moviesById}\n        }\n        default:\n            return state\n    }\n}\n","import {SEARCH_CANCEL, SEARCH_FAIL, SEARCH_QUERY_CHANGED, SEARCH_REQUEST, SEARCH_SUCCESS} from \"./search.types\"\nimport {prepareMovie} from \"../../utils\"\nimport {LOCATION_CHANGE} from 'connected-react-router';\n\nconst initialSearchState = {\n    query: '',\n    isFetching: false,\n    isFetched: false,\n    foundMovies: []\n}\n\n// sub-reducer\nexport function searchReducer(state = initialSearchState, action) {\n    const {type, payload} = action\n    switch (type) {\n        case LOCATION_CHANGE:\n            return initialSearchState\n        case SEARCH_QUERY_CHANGED:\n            return {...state, query: payload.query}\n        case SEARCH_REQUEST:\n            return {...state, isFetching: true, isFetched: false, foundMovies: []}\n        case SEARCH_SUCCESS: {\n            let movies = payload.results.map(movie => prepareMovie({raw: movie, posterSize: 'w154'}))\n            movies = filterEmptyMovies(movies).sort((a, b) => b.popularity - a.popularity)\n            return {\n                ...state,\n                isFetching: false,\n                isFetched: true,\n                foundMovies: movies\n            }\n        }\n        case SEARCH_FAIL:\n        case SEARCH_CANCEL:\n            return {...state, isFetching: false, isFetched: false, foundMovies: []}\n        default:\n            return state\n    }\n}\n\nfunction filterEmptyMovies(movies) {\n    return movies.filter(m => {\n        return !!m.title && m.popularity > 0.25\n    })\n}\n","import {applyMiddleware, combineReducers, createStore, compose} from 'redux'\nimport {createBrowserHistory} from 'history'\nimport {MovieDbApiMiddleware} from \"./middlewares/moviedb-api\"\nimport {createLogger} from \"redux-logger\"\nimport {connectRouter, routerMiddleware} from 'connected-react-router'\nimport {commonReducer} from \"./domains/common/common.reducer\"\nimport {uiReducer} from \"./domains/ui/ui.reducer\"\nimport {userReducer} from \"./domains/user/user.reducer\"\nimport {movieReducer} from \"./domains/movie/movie.reducer\"\nimport {homeReducer} from \"./domains/home/home.reducer\"\nimport {entitiesReducer} from \"./domains/entities/entities.reducer\"\nimport {searchReducer} from \"./domains/search/search.reducer\"\n\nexport const history = createBrowserHistory()\n\nconst getMiddleware = function () {\n    return process.env.NODE_ENV === 'production' ?\n        applyMiddleware(MovieDbApiMiddleware(), routerMiddleware(history)) :\n        applyMiddleware(MovieDbApiMiddleware(), routerMiddleware(history), createLogger())\n}\n\nconst rootReducer = combineReducers({\n    ui: uiReducer,\n    common: commonReducer,\n    user: userReducer,\n    movie: movieReducer,\n    home: homeReducer,\n    search: searchReducer,\n    entities: entitiesReducer,\n    router: connectRouter(history)\n})\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nexport const store = createStore(rootReducer, composeEnhancers(getMiddleware()))\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport {Provider} from \"react-redux\"\nimport { ConnectedRouter } from 'connected-react-router'\nimport {store, history} from \"./store/store\"\n\nReactDOM.render(\n    <Provider store={store}>\n        <ConnectedRouter history={history}>\n            <App />\n        </ConnectedRouter>\n    </Provider>,\n    document.getElementById('root')\n)\n"],"sourceRoot":""}